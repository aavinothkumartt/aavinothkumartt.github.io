<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test Station Dashboard v6.5</title>
    <style>
        :root { --primary: #1e3a5f; --accent: #0066cc; --bg: #f8fafc; --surface: #ffffff; --text: #0f172a; --text-secondary: #475569; --border: #e2e8f0; --border-light: #f1f5f9; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); padding: 29px; }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { font-size: 29px; font-weight: 700; margin-bottom: 5px; }
        h2 { font-size: 21px; font-weight: 700; margin-bottom: 19px; }
        .controls { display: flex; gap: 10px; margin-bottom: 29px; flex-wrap: wrap; }
        .btn { padding: 10px 16px; border: 1px solid var(--border); border-radius: 6px; background: var(--surface); cursor: pointer; font-size: 16px; font-weight: 500; color: var(--text-secondary); transition: all 150ms ease; }
        .btn:hover { border-color: var(--accent); color: var(--accent); background: #f0f4ff; }
        .btn.active { background: var(--primary); color: white; border-color: var(--primary); }
        
        .kpi-header { font-size: 16px; font-weight: 700; color: #1e3a5f; margin-bottom: 10px; margin-top: 20px; text-transform:uppercase; letter-spacing:0.5px; border-bottom: 2px solid #e2e8f0; padding-bottom: 5px; display:inline-block; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 14px; margin-bottom: 10px; }
        
        .stat-card { background: var(--surface); padding: 19px; border-radius: 7px; border: 1px solid var(--border); transition: transform 0.1s; display:flex; flex-direction:column; justify-content:space-between; position:relative; }
        .stat-card[onclick]:hover { transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); border-color: var(--accent); cursor:pointer; }
        .stat-label { font-size: 13px; color: var(--text-secondary); text-transform: uppercase; margin-bottom: 10px; font-weight: 600; letter-spacing: 0.5px; }
        .stat-value { font-size: 26px; font-weight: 700; color: var(--primary); }
        .stat-sub { font-size: 12px; color: #94a3b8; margin-top: 4px; font-weight: 500; }
        
        .info-icon { position: absolute; top: 10px; right: 10px; opacity: 0; transition: opacity 0.2s; color: var(--accent); font-size: 14px; }
        .stat-card:hover .info-icon { opacity: 1; }

        .view { background: var(--surface); padding: 24px; border-radius: 7px; border: 1px solid var(--border); display: none; }
        .view.active { display: block; }
        .station-section { margin: 19px 0; padding: 19px; background: var(--bg); border-radius: 7px; border: 1px solid var(--border); }
        .timeline-row { display: flex; flex-wrap: nowrap; align-items: center; gap: 0; overflow-x: auto; padding-bottom: 10px; }
        .sys { padding: 14px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg); margin: 0; flex-shrink: 0; }
        .label { font-weight: 600; color: var(--primary); margin-bottom: 5px; font-size: 15px; }
        .timestamps { font-size: 13px; color: var(--text-secondary); margin-bottom: 10px; }
        .track { display: flex; height: 72px; background: white; border: 1px solid var(--border); border-radius: 5px; overflow: hidden; }
        .seg { flex: 1; cursor: pointer; border-right: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; position: relative; }
        .seg-label { font-size: 12px; color: white; font-weight: 600; text-align: center; padding: 4px; }
        .seg.idle { background: linear-gradient(135deg, #cbd5e1, #94a3b8); }
        .seg.event.pass { background: linear-gradient(135deg, #059669, #047857); }
        .seg.event.fail { background: linear-gradient(135deg, #dc2626, #b91c1c); }
        .seg.event.fail.clickable:hover { filter: brightness(0.9); }
        .gap-card { background: linear-gradient(135deg, rgba(100,150,255,0.08), rgba(150,180,255,0.08)); border: 1px solid rgba(100,150,255,0.25); border-radius: 5px; padding: 8px 10px; font-size: 12px; color: var(--text-secondary); margin: 0; flex-shrink: 0; line-height: 1.2; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 4px; min-width: 90px; max-width: 110px; }
        .gap-card strong { color: #0066cc; font-weight: 700; font-size: 16px; line-height: 1; }
        .gap-card.after-hours { background: linear-gradient(135deg, rgba(138,99,77,0.1), rgba(168,108,78,0.1)); border: 1px solid rgba(138,99,77,0.3); }
        .gap-card.after-hours strong { color: #8A6344; }
        .legend { display: flex; gap: 19px; margin-top: 21px; flex-wrap: wrap; font-size: 14px; }
        .legend-item { display: flex; align-items: center; gap: 7px; }
        .legend-box { width: 16px; height: 16px; border-radius: 4px; }
        .detailed-table-wrapper { overflow-x: auto; }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; }
        .modal-overlay.active { display: flex; }
        .modal-box { background: white; border-radius: 8px; padding: 24px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
        .modal-header { font-size: 20px; font-weight: 700; color: #1e3a5f; margin-bottom: 16px; border-bottom: 2px solid #e2e8f0; padding-bottom: 12px; }
        .modal-section { margin-bottom: 20px; }
        .modal-label { font-size: 13px; font-weight: 600; color: #475569; text-transform: uppercase; margin-bottom: 8px; }
        .modal-content { white-space: pre-wrap; word-break: break-word; line-height: 1.6; color: #0f172a; padding: 12px; background: #f8fafc; border-radius: 6px; border-left: 3px solid #0066cc; }
        .modal-close { float: right; font-size: 24px; font-weight: bold; color: #aaa; cursor: pointer; line-height: 1; }
        .kpi-def-block { margin-bottom: 15px; border-left: 3px solid #0066cc; padding-left: 15px; }
        .kpi-def-title { font-weight: 700; color: #1e3a5f; margin-bottom: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Test Station Dashboard</h1>
        <div class="controls">
            <button class="btn active" onclick="switchTab('timeline', this)">Timeline View</button>
            <button class="btn" onclick="switchTab('replacements', this)">Component Replacement Summary</button>
            <button class="btn" onclick="switchTab('detailed', this)">Detailed</button>
            <button class="btn" onclick="switchTab('stats', this)">Stats</button>
        </div>
        
        <div id="timeline" class="view active">
            
            <div class="kpi-header">Production KPIs</div>
            <div class="stats-grid">
                <div class="stat-card" onclick="showKpiInfo('throughput')">
                    <div class="info-icon">‚ÑπÔ∏è</div>
                    <div class="stat-label">Throughput (Weekly)</div>
                    <div class="stat-value">7.0</div>
                    <div class="stat-sub">Units per week</div>
                </div>
                <div class="stat-card" onclick="showKpiInfo('fpy_runtime')">
                    <div class="info-icon">‚ÑπÔ∏è</div>
                    <div class="stat-label">Avg Assembly Runtime (FPY)</div>
                    <div class="stat-value">4h 23m</div>
                    <div class="stat-sub">Shift Time (First-Pass Units)</div>
                </div>
                <div class="stat-card" onclick="showKpiInfo('downtime')">
                    <div class="info-icon">‚ÑπÔ∏è</div>
                    <div class="stat-label">Avg Downtime / Failure</div>
                    <div class="stat-value">3h 20m</div>
                    <div class="stat-sub">Shift-based idle after fail</div>
                </div>
                <div class="stat-card" onclick="showKpiInfo('net')">
                    <div class="info-icon">‚ÑπÔ∏è</div>
                    <div class="stat-label">Avg Test Runtime</div>
                    <div class="stat-value" style="color:#0284c7;">3h 39m</div>
                    <div class="stat-sub">Strictly testing time (No Gaps)</div>
                </div>
                <div class="stat-card" onclick="showKpiInfo('gross')">
                    <div class="info-icon">‚ÑπÔ∏è</div>
                    <div class="stat-label">Avg Assembly Runtime (APY)</div>
                    <div class="stat-value" style="color:#64748b;">4h 23m</div>
                    <div class="stat-sub">Testing + Idle (Within Shift)</div>
                </div>
            </div>

            <div class="kpi-header">Overall Yield Summary</div>
            <div class="stats-grid">
                <div class="stat-card">
                   <div class="stat-label">Total Units</div>
                   <div class="stat-value">6</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">FPY (First-Pass)</div>
                    <div class="stat-value" style="color: #059669;">100.0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">APY (All-Pass)</div>
                    <div class="stat-value" style="color: #10b981;">100.0%</div>
                </div>
                
                <div class="stat-card" style="cursor: pointer;" onclick="showSystemList('First-Pass Systems', 'first_pass')">
                    <div class="stat-label">First-Pass</div>
                    <div class="stat-value" style="color: #059669;">1</div>
                </div>
                <div class="stat-card" style="cursor: pointer;" onclick="showSystemList('Recovered Systems', 'pass')">
                    <div class="stat-label">Recovered</div>
                    <div class="stat-value" style="color: #10b981;">0</div>
                </div>
                <div class="stat-card" style="cursor: pointer;" onclick="showSystemList('WIP Systems', 'wip')">
                    <div class="stat-label">WIP</div>
                    <div class="stat-value" style="color: #f59e0b;">5</div>
                </div>
                
            </div>
            
            <h2 style="margin-top: 32px; margin-bottom: 10px;">System Timeline</h2>
            <p style="color: #666; font-size: 14px; margin-bottom: 19px;">üí° Scroll right. <strong>Click blocks</strong> for details.</p>
            
			<div class="station-section">
				<h3 style="color: #1e3a5f; margin: 0 0 6px 0; font-size: 18px; font-weight: 600;">Test Station 2A125</h3>
				<p style="color: #475569; margin: 0 0 18px 0; font-size: 14px;">Record of 1 systems (1 WIP)</p>
				<div class="timeline-row"><div class="sys" data-system="DR14G-151" data-start="2026-01-09 11:41" data-finish="2026-01-09 15:47"><div class="label">DR14G-151</div><div class="timestamps info-verbose">Start: 2026-01-09 11:41 Finish: 2026-01-09 15:47</div><div class="track"><div class="seg event fail clickable" style="width: 4.0650406504065035%; position: relative;" title="2026-01-09 11:41:16 (Work: 10m)" onclick="showFailureDetail('PRETEST', 'MjAyNi0wMS0wOSAxMTo1MDo1MSw3MTUgLSBFUlJPUiAtIFtBUkNfQk1DX0kyQ19VQkJfVEVTVF1bVUJCMl1bRkFJTEBdIEkyQyAtIFVCQjIgdGVzdCBOb3QgUGFzcyEKLT4gW0NIRUNLUE9JTlQgRkFJTF0gQk1DLCBBUkMgQk1DIEkyQyBVQkIgVEVTVCBbYXJjX2JtY19pMmNfdWJiX3Rlc3Rd', '')"><span class="seg-label">PRETEST 10m</span></div><div class="seg idle" style="width: 81.30081300813008%; min-width: 10px;" title="2026-01-09 15:12:06 (Work: 3m)"><span class="seg-label">3h 20m</span></div><div class="seg event pass" style="width: 1.2195121951219512%; position: relative;" title="2026-01-09 15:12:06 (Work: 3m)" ><span class="seg-label">PRETEST 3m</span></div><div class="seg idle" style="width: 6.504065040650407%; min-width: 10px;" title="2026-01-09 15:31:31 (Work: 17m)"><span class="seg-label">16m</span></div><div class="seg event fail clickable" style="width: 6.910569105691057%; position: relative;" title="2026-01-09 15:31:31 (Work: 17m)" onclick="showFailureDetail('FAT', 'MjAyNi0wMS0wOSAxNTo0ODoyNCwzOTMgLSBFUlJPUiAtIFtGVF9FVEhfU1RSRVNTXVtGQUlMQF0gRlRfRVRIX1NUUkVTUyB0ZXN0IE5PVCBQYXNzIQotPiBbQ0hFQ0tQT0lOVCBGQUlMXSBHUFUsIFRUIFVCQiBGVU5DIEVUSCBTVFJFU1MgVEVTVCBbdHRfZnRfdWJiX2V0aF9zdHJlc3NfdGVzdF0=', '')"><span class="seg-label">FAT 17m</span></div></div><div class="info info-verbose">Total: 4h 6m (Test Runtime: 30m)</div></div>
				</div>
			</div>
			<div class="station-section">
				<h3 style="color: #1e3a5f; margin: 0 0 6px 0; font-size: 18px; font-weight: 600;">Test Station 2A225</h3>
				<p style="color: #475569; margin: 0 0 18px 0; font-size: 14px;">Record of 1 systems (1 FP)</p>
				<div class="timeline-row"><div class="sys" data-system="DR14G-152" data-start="2026-01-09 12:08" data-finish="2026-01-09 16:30"><div class="label">DR14G-152</div><div class="timestamps info-verbose">Start: 2026-01-09 12:08 Finish: 2026-01-09 16:30</div><div class="track"><div class="seg event pass" style="width: 3.816793893129771%; position: relative;" title="2026-01-09 12:08:36 (Work: 10m)" ><span class="seg-label">PRETEST 10m</span></div><div class="seg idle" style="width: 6.106870229007633%; min-width: 10px;" title="2026-01-09 12:35:12 (Work: 30m)"><span class="seg-label">16m</span></div><div class="seg event pass" style="width: 11.450381679389313%; position: relative;" title="2026-01-09 12:35:12 (Work: 30m)" ><span class="seg-label">FAT 30m</span></div><div class="seg idle" style="width: 4.961832061068702%; min-width: 10px;" title="2026-01-09 13:18:39 (Work: 2h 25m)"><span class="seg-label">13m</span></div><div class="seg event pass" style="width: 55.343511450381676%; position: relative;" title="2026-01-09 13:18:39 (Work: 2h 25m)" ><span class="seg-label">FRO 2h 25m</span></div><div class="seg idle" style="width: 5.343511450381679%; min-width: 10px;" title="2026-01-09 15:57:55 (Work: 34m)"><span class="seg-label">14m</span></div><div class="seg event pass" style="width: 12.977099236641221%; position: relative;" title="2026-01-09 15:57:55 (Work: 34m)" ><span class="seg-label">FFT 34m</span></div></div><div class="info info-verbose">Total: 4h 22m (Test Runtime: 3h 39m)</div></div>
				</div>
			</div>
			<div class="station-section">
				<h3 style="color: #1e3a5f; margin: 0 0 6px 0; font-size: 18px; font-weight: 600;">Test Station 2A226</h3>
				<p style="color: #475569; margin: 0 0 18px 0; font-size: 14px;">Record of 1 systems (1 WIP)</p>
				<div class="timeline-row"><div class="sys" data-system="DR14G-148" data-start="2026-01-09 11:14" data-finish="2026-01-09 11:17"><div class="label">DR14G-148</div><div class="timestamps info-verbose">Start: 2026-01-09 11:14 Finish: 2026-01-09 11:17</div><div class="track"><div class="seg event fail clickable" style="width: 100.0%; position: relative;" title="2026-01-09 11:14:23 (Work: 3m)" onclick="showFailureDetail('FAT', 'MjAyNi0wMS0wOSAxMToxNjo1MiwwMjQgLSBFUlJPUiAtIFtBUkNfQk1DX1VCQl9QSFlfVkVSX0NIRUNLXVtVQkIxXVtGQUlMQEIwMjAwMjAxNF0gUEhZMSBFeGVjIGNvbW1hbmQ6aXBtaXRvb2wgcmF3IDB4MzAgMHg4MSAweDAwIDB4MCAweDAgdW5zdWNjZXNzZnVsIQoyMDI2LTAxLTA5IDExOjE2OjUyLDI5NSAtIEVSUk9SIC0gW0FSQ19CTUNfVUJCX1BIWV9WRVJfQ0hFQ0tdW1VCQjFdW0ZBSUxAQjAyMDAyMDE0XSBQSFkyIEV4ZWMgY29tbWFuZDppcG1pdG9vbCByYXcgMHgzMCAweDgxIDB4MDAgMHgwIDB4MSB1bnN1Y2Nlc3NmdWwhCjIwMjYtMDEtMDkgMTE6MTY6NTIsNTU4IC0gRVJST1IgLSBbQVJDX0JNQ19VQkJfUEhZX1ZFUl9DSEVDS11bVUJCMV1bRkFJTEBCMDIwMDIwMTRdIFBIWTMgRXhlYyBjb21tYW5kOmlwbWl0b29sIHJhdyAweDMwIDB4ODEgMHgwMCAweDAgMHgyIHVuc3VjY2Vzc2Z1bCEKMjAyNi0wMS0wOSAxMToxNjo1Miw3OTAgLSBFUlJPUiAtIFtBUkNfQk1DX1VCQl9QSFlfVkVSX0NIRUNLXVtVQkIxXVtGQUlMQEIwMjAwMjAxNF0gUEhZNCBFeGVjIGNvbW1hbmQ6aXBtaXRvb2wgcmF3IDB4MzAgMHg4MSAweDAwIDB4MCAweDMgdW5zdWNjZXNzZnVsIQoyMDI2LTAxLTA5IDExOjE2OjUzLDAxNyAtIEVSUk9SIC0gW0FSQ19CTUNfVUJCX1BIWV9WRVJfQ0hFQ0tdW1VCQjFdW0ZBSUxAQjAyMDAyMDE0XSBQSFk1IEV4ZWMgY29tbWFuZDppcG1pdG9vbCByYXcgMHgzMCAweDgxIDB4MDAgMHgwIDB4NCB1bnN1Y2Nlc3NmdWwhCjIwMjYtMDEtMDkgMTE6MTY6NTMsMzA1IC0gRVJST1IgLSBbQVJDX0JNQ19VQkJfUEhZX1ZFUl9DSEVDS11bVUJCMV1bRkFJTEBCMDIwMDIwMTRdIFBIWTYgRXhlYyBjb21tYW5kOmlwbWl0b29sIHJhdyAweDMwIDB4ODEgMHgwMCAweDAgMHg1IHVuc3VjY2Vzc2Z1bCEKMjAyNi0wMS0wOSAxMToxNjo1Myw1MTIgLSBFUlJPUiAtIFtBUkNfQk1DX1VCQl9QSFlfVkVSX0NIRUNLXVtVQkIxXVtGQUlMQEIwMjAwMjAxNF0gUEhZNyBFeGVjIGNvbW1hbmQ6aXBtaXRvb2wgcmF3IDB4MzAgMHg4MSAweDAwIDB4MCAweDYgdW5zdWNjZXNzZnVsIQoyMDI2LTAxLTA5IDExOjE2OjUzLDczMiAtIEVSUk9SIC0gW0FSQ19CTUNfVUJCX1BIWV9WRVJfQ0hFQ0tdW1VCQjJdW0ZBSUxAQjAyMDAyMDE0XSBQSFkxIEV4ZWMgY29tbWFuZDppcG1pdG9vbCByYXcgMHgzMCAweDgxIDB4MDAgMHgxIDB4MCB1bnN1Y2Nlc3NmdWwhCjIwMjYtMDEtMDkgMTE6MTY6NTMsOTcyIC0gRVJST1IgLSBbQVJDX0JNQ19VQkJfUEhZX1ZFUl9DSEVDS11bVUJCMl1bRkFJTEBCMDIwMDIwMTRdIFBIWTIgRXhlYyBjb21tYW5kOmlwbWl0b29sIHJhdyAweDMwIDB4ODEgMHgwMCAweDEgMHgxIHVuc3VjY2Vzc2Z1bCEKMjAyNi0wMS0wOSAxMToxNjo1NCw0NTcgLSBFUlJPUiAtIFtBUkNfQk1DX1VCQl9QSFlfVkVSX0NIRUNLXVtVQkIyXVtGQUlMQEIwMjAwMjAxNF0gUEhZMyBFeGVjIGNvbW1hbmQ6aXBtaXRvb2wgcmF3IDB4MzAgMHg4MSAweDAwIDB4MSAweDIgdW5zdWNjZXNzZnVsIQoyMDI2LTAxLTA5IDExOjE2OjU0LDgxNSAtIEVSUk9SIC0gW0FSQ19CTUNfVUJCX1BIWV9WRVJfQ0hFQ0tdW1VCQjJdW0ZBSUxAQjAyMDAyMDE0XSBQSFk0IEV4ZWMgY29tbWFuZDppcG1pdG9vbCByYXcgMHgzMCAweDgxIDB4MDAgMHgxIDB4MyB1bnN1Y2Nlc3NmdWwhCjIwMjYtMDEtMDkgMTE6MTY6NTUsMTg4IC0gRVJST1IgLSBbQVJDX0JNQ19VQkJfUEhZX1ZFUl9DSEVDS11bVUJCMl1bRkFJTEBCMDIwMDIwMTRdIFBIWTUgRXhlYyBjb21tYW5kOmlwbWl0b29sIHJhdyAweDMwIDB4ODEgMHgwMCAweDEgMHg0IHVuc3VjY2Vzc2Z1bCEKMjAyNi0wMS0wOSAxMToxNjo1NSw1MzYgLSBFUlJPUiAtIFtBUkNfQk1DX1VCQl9QSFlfVkVSX0NIRUNLXVtVQkIyXVtGQUlMQEIwMjAwMjAxNF0gUEhZNiBFeGVjIGNvbW1hbmQ6aXBtaXRvb2wgcmF3IDB4MzAgMHg4MSAweDAwIDB4MSAweDUgdW5zdWNjZXNzZnVsIQoyMDI2LTAxLTA5IDExOjE2OjU1LDg4OCAtIEVSUk9SIC0gW0FSQ19CTUNfVUJCX1BIWV9WRVJfQ0hFQ0tdW1VCQjJdW0ZBSUxAQjAyMDAyMDE0XSBQSFk3IEV4ZWMgY29tbWFuZDppcG1pdG9vbCByYXcgMHgzMCAweDgxIDB4MDAgMHgxIDB4NiB1bnN1Y2Nlc3NmdWwhCjIwMjYtMDEtMDkgMTE6MTY6NTYsMTI0IC0gRVJST1IgLSBbQVJDX0JNQ19VQkJfUEhZX1ZFUl9DSEVDS11bVUJCM11bRkFJTEBCMDIwMDIwMTRdIFBIWTEgRXhlYyBjb21tYW5kOmlwbWl0b29sIHJhdyAweDMwIDB4ODEgMHgwMCAweDIgMHgwIHVuc3VjY2Vzc2Z1bCEKMjAyNi0wMS0wOSAxMToxNjo1NiwzNzggLSBFUlJPUiAtIFtBUkNfQk1DX1VCQl9QSFlfVkVSX0NIRUNLXVtVQkIzXVtGQUlMQEIwMjAwMjAxNF0gUEhZMiBFeGVjIGNvbW1hbmQ6aXBtaXRvb2wgcmF3IDB4MzAgMHg4MSAweDAwIDB4MiAweDEgdW5zdWNjZXNzZnVsIQoyMDI2LTAxLTA5IDExOjE2OjU2LDYxNCAtIEVSUk9SIC0gW0FSQ19CTUNfVUJCX1BIWV9WRVJfQ0hFQ0tdW1VCQjNdW0ZBSUxAQjAyMDAyMDE0XSBQSFkzIEV4ZWMgY29tbWFuZDppcG1pdG9vbCByYXcgMHgzMCAweDgxIDB4MDAgMHgyIDB4MiB1bnN1Y2Nlc3NmdWwhCjIwMjYtMDEtMDkgMTE6MTY6NTYsODY4IC0gRVJST1IgLSBbQVJDX0JNQ19VQkJfUEhZX1ZFUl9DSEVDS11bVUJCM11bRkFJTEBCMDIwMDIwMTRdIFBIWTQgRXhlYyBjb21tYW5kOmlwbWl0b29sIHJhdyAweDMwIDB4ODEgMHgwMCAweDIgMHgzIHVuc3VjY2Vzc2Z1bCEKMjAyNi0wMS0wOSAxMToxNjo1NywxMjggLSBFUlJPUiAtIFtBUkNfQk1DX1VCQl9QSFlfVkVSX0NIRUNLXVtVQkIzXVtGQUlMQEIwMjAwMjAxNF0gUEhZNSBFeGVjIGNvbW1hbmQ6aXBtaXRvb2wgcmF3IDB4MzAgMHg4MSAweDAwIDB4MiAweDQgdW5zdWNjZXNzZnVsIQoyMDI2LTAxLTA5IDExOjE2OjU3LDM5MiAtIEVSUk9SIC0gW0FSQ19CTUNfVUJCX1BIWV9WRVJfQ0hFQ0tdW1VCQjNdW0ZBSUxAQjAyMDAyMDE0XSBQSFk2IEV4ZWMgY29tbWFuZDppcG1pdG9vbCByYXcgMHgzMCAweDgxIDB4MDAgMHgyIDB4NSB1bnN1Y2Nlc3NmdWwhCjIwMjYtMDEtMDkgMTE6MTY6NTcsNjE2IC0gRVJST1IgLSBbQVJDX0JNQ19VQkJfUEhZX1ZFUl9DSEVDS11bVUJCM11bRkFJTEBCMDIwMDIwMTRdIFBIWTcgRXhlYyBjb21tYW5kOmlwbWl0b29sIHJhdyAweDMwIDB4ODEgMHgwMCAweDIgMHg2IHVuc3VjY2Vzc2Z1bCEKMjAyNi0wMS0wOSAxMToxNjo1Nyw4NDggLSBFUlJPUiAtIFtBUkNfQk1DX1VCQl9QSFlfVkVSX0NIRUNLXVtVQkI0XVtGQUlMQEIwMjAwMjAxNF0gUEhZMSBFeGVjIGNvbW1hbmQ6aXBtaXRvb2wgcmF3IDB4MzAgMHg4MSAweDAwIDB4MyAweDAgdW5zdWNjZXNzZnVsIQoyMDI2LTAxLTA5IDExOjE2OjU4LDA4OCAtIEVSUk9SIC0gW0FSQ19CTUNfVUJCX1BIWV9WRVJfQ0hFQ0tdW1VCQjRdW0ZBSUxAQjAyMDAyMDE0XSBQSFkyIEV4ZWMgY29tbWFuZDppcG1pdG9vbCByYXcgMHgzMCAweDgxIDB4MDAgMHgzIDB4MSB1bnN1Y2Nlc3NmdWwhCjIwMjYtMDEtMDkgMTE6MTY6NTgsMzYwIC0gRVJST1IgLSBbQVJDX0JNQ19VQkJfUEhZX1ZFUl9DSEVDS11bVUJCNF1bRkFJTEBCMDIwMDIwMTRdIFBIWTMgRXhlYyBjb21tYW5kOmlwbWl0b29sIHJhdyAweDMwIDB4ODEgMHgwMCAweDMgMHgyIHVuc3VjY2Vzc2Z1bCEKMjAyNi0wMS0wOSAxMToxNjo1OCw1ODggLSBFUlJPUiAtIFtBUkNfQk1DX1VCQl9QSFlfVkVSX0NIRUNLXVtVQkI0XVtGQUlMQEIwMjAwMjAxNF0gUEhZNCBFeGVjIGNvbW1hbmQ6aXBtaXRvb2wgcmF3IDB4MzAgMHg4MSAweDAwIDB4MyAweDMgdW5zdWNjZXNzZnVsIQoyMDI2LTAxLTA5IDExOjE2OjU4LDg3MiAtIEVSUk9SIC0gW0FSQ19CTUNfVUJCX1BIWV9WRVJfQ0hFQ0tdW1VCQjRdW0ZBSUxAQjAyMDAyMDE0XSBQSFk1IEV4ZWMgY29tbWFuZDppcG1pdG9vbCByYXcgMHgzMCAweDgxIDB4MDAgMHgzIDB4NCB1bnN1Y2Nlc3NmdWwhCjIwMjYtMDEtMDkgMTE6MTY6NTksMTMyIC0gRVJST1IgLSBbQVJDX0JNQ19VQkJfUEhZX1ZFUl9DSEVDS11bVUJCNF1bRkFJTEBCMDIwMDIwMTRdIFBIWTYgRXhlYyBjb21tYW5kOmlwbWl0b29sIHJhdyAweDMwIDB4ODEgMHgwMCAweDMgMHg1IHVuc3VjY2Vzc2Z1bCEKMjAyNi0wMS0wOSAxMToxNjo1OSwzODYgLSBFUlJPUiAtIFtBUkNfQk1DX1VCQl9QSFlfVkVSX0NIRUNLXVtVQkI0XVtGQUlMQEIwMjAwMjAxNF0gUEhZNyBFeGVjIGNvbW1hbmQ6aXBtaXRvb2wgcmF3IDB4MzAgMHg4MSAweDAwIDB4MyAweDYgdW5zdWNjZXNzZnVsIQotPiBbQ0hFQ0tQT0lOVCBGQUlMXSBCTUMsIEFSQyBCTUMgVUJCIFBIWSBWRVJTSU9OIENIRUNLIFthcmNfYm1jX3ViYl9waHlfdmVyX2NoZWNrXQ==', '')"><span class="seg-label">FAT 3m</span></div></div><div class="info info-verbose">Total: 3m (Test Runtime: 3m)</div></div>
				</div>
			</div>
			<div class="station-section">
				<h3 style="color: #1e3a5f; margin: 0 0 6px 0; font-size: 18px; font-weight: 600;">Test Station 2A324</h3>
				<p style="color: #475569; margin: 0 0 18px 0; font-size: 14px;">Record of 1 systems (1 WIP)</p>
				<div class="timeline-row"><div class="sys" data-system="DR14G-154" data-start="2026-01-09 14:15" data-finish="2026-01-09 15:17"><div class="label">DR14G-154</div><div class="timestamps info-verbose">Start: 2026-01-09 14:15 Finish: 2026-01-09 15:17</div><div class="track"><div class="seg event pass" style="width: 19.35483870967742%; position: relative;" title="2026-01-09 14:15:10 (Work: 12m)" ><span class="seg-label">PRETEST 12m</span></div><div class="seg idle" style="width: 32.25806451612903%; min-width: 10px;" title="2026-01-09 14:47:43 (Work: 30m)"><span class="seg-label">20m</span></div><div class="seg event pass" style="width: 48.38709677419355%; position: relative;" title="2026-01-09 14:47:43 (Work: 30m)" ><span class="seg-label">FAT 30m</span></div></div><div class="info info-verbose">Total: 1h 2m (Test Runtime: 42m)</div></div>
				</div>
			</div>
			<div class="station-section">
				<h3 style="color: #1e3a5f; margin: 0 0 6px 0; font-size: 18px; font-weight: 600;">Test Station 2A325</h3>
				<p style="color: #475569; margin: 0 0 18px 0; font-size: 14px;">Record of 1 systems (1 WIP)</p>
				<div class="timeline-row"><div class="sys" data-system="DR14G-153" data-start="2026-01-09 13:45" data-finish="2026-01-09 14:43"><div class="label">DR14G-153</div><div class="timestamps info-verbose">Start: 2026-01-09 13:45 Finish: 2026-01-09 14:43</div><div class="track"><div class="seg event pass" style="width: 20.689655172413794%; position: relative;" title="2026-01-09 13:45:51 (Work: 12m)" ><span class="seg-label">PRETEST 12m</span></div><div class="seg idle" style="width: 27.586206896551722%; min-width: 10px;" title="2026-01-09 14:14:31 (Work: 30m)"><span class="seg-label">16m</span></div><div class="seg event pass" style="width: 51.724137931034484%; position: relative;" title="2026-01-09 14:14:31 (Work: 30m)" ><span class="seg-label">FAT 30m</span></div></div><div class="info info-verbose">Total: 58m (Test Runtime: 42m)</div></div>
				</div>
			</div>
			<div class="station-section">
				<h3 style="color: #1e3a5f; margin: 0 0 6px 0; font-size: 18px; font-weight: 600;">Test Station 2A326</h3>
				<p style="color: #475569; margin: 0 0 18px 0; font-size: 14px;">Record of 1 systems (1 WIP)</p>
				<div class="timeline-row"><div class="sys" data-system="DR14G-149" data-start="2026-01-09 13:37" data-finish="2026-01-09 14:33"><div class="label">DR14G-149</div><div class="timestamps info-verbose">Start: 2026-01-09 13:37 Finish: 2026-01-09 14:33</div><div class="track"><div class="seg event pass" style="width: 17.857142857142858%; position: relative;" title="2026-01-09 13:37:03 (Work: 10m)" ><span class="seg-label">PRETEST 10m</span></div><div class="seg idle" style="width: 28.57142857142857%; min-width: 10px;" title="2026-01-09 14:03:44 (Work: 30m)"><span class="seg-label">16m</span></div><div class="seg event pass" style="width: 53.57142857142857%; position: relative;" title="2026-01-09 14:03:44 (Work: 30m)" ><span class="seg-label">FAT 30m</span></div></div><div class="info info-verbose">Total: 56m (Test Runtime: 40m)</div></div>
				</div>
			</div>
            <div class="legend">
                <div class="legend-item"><div class="legend-box" style="background: linear-gradient(135deg, #059669, #047857);"></div><span>Pass (Green)</span></div>
                <div class="legend-item"><div class="legend-box" style="background: linear-gradient(135deg, #dc2626, #b91c1c);"></div><span>Fail (Red)</span></div>
                <div class="legend-item"><div class="legend-box" style="background: linear-gradient(135deg, #cbd5e1, #94a3b8);"></div><span>Idle (Gray)</span></div>
                <div class="legend-item" style="border-left: 2px solid var(--border); padding-left: 14px;"><span>‚è∏ Normal gap | üåô After-hours</span></div>
            </div>
        </div>
        
        <div id="replacements" class="view">
            <h2>Component Replacement Summary</h2>
            <p style="color: #666; margin-bottom: 20px;">Aggregated count of replacements per phase. <strong>Hover over red cells</strong> to see potential causes.</p>
            <div style="padding: 20px; color: #666; font-style: italic;">No component replacement data found in Excel.</div>
            <h2 style="margin-top: 40px; border-top: 1px solid #e2e8f0; padding-top: 30px;">Component Failure Analysis</h2>
            
        </div>

        <div id="detailed" class="view">
            <h2>Event Details</h2>
            <div style="margin-bottom: 19px;"><label>System</label><select id="system-selector" onchange="renderDetailedTimeline(this.value)" style="padding: 7px;"><option value="DR14G-148">DR14G-148</option>
<option value="DR14G-149">DR14G-149</option>
<option value="DR14G-151">DR14G-151</option>
<option value="DR14G-152">DR14G-152</option>
<option value="DR14G-153">DR14G-153</option>
<option value="DR14G-154">DR14G-154</option></select></div>
            <div id="detailed-content" class="detailed-table-wrapper"></div>
        </div>
        
        <div id="stats" class="view">
            <h2>Performance Summary</h2>
            <p style="margin-bottom:15px; font-size:14px; color:#64748b;"><strong>Avg Test Runtime:</strong> Only actual testing events.<br><strong>Gross Floor Time:</strong> Start to Finish duration, filtered by shift hours (08:00-20:00).</p>
            <table style="width: 100%; border-collapse: collapse; font-size: 14px;"><tr style="background: #1e3a5f; color: white;"><th style="padding: 11px; border: 1px solid #e2e8f0; font-weight: 600;">System</th><th style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight: 600;">Status</th><th style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight: 600;">Total Duration (Wall)</th><th style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight: 600; background:#f0f9ff; color:#0369a1;">Avg Test Runtime<br><span style="font-size:11px;font-weight:400">(No Gaps)</span></th><th style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight: 600; background:#f8fafc; color:#475569;">Gross Floor Time<br><span style="font-size:11px;font-weight:400">(Incl. Gaps in Shift)</span></th></tr><tr style="background: #f8fafc;"><td style="padding: 11px; border: 1px solid #e2e8f0; font-weight: 600;">DR14G-148</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color: #f59e0b; font-weight: 600;">Wip</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center;">0h 3m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight:700; color:#0284c7; background:#f0f9ff;">0h 3m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color:#475569;">0h 3m</td></tr><tr style="background: #f8fafc;"><td style="padding: 11px; border: 1px solid #e2e8f0; font-weight: 600;">DR14G-149</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color: #f59e0b; font-weight: 600;">Wip</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center;">0h 56m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight:700; color:#0284c7; background:#f0f9ff;">0h 40m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color:#475569;">0h 56m</td></tr><tr style="background: #f8fafc;"><td style="padding: 11px; border: 1px solid #e2e8f0; font-weight: 600;">DR14G-151</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color: #f59e0b; font-weight: 600;">Wip</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center;">4h 7m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight:700; color:#0284c7; background:#f0f9ff;">0h 30m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color:#475569;">4h 7m</td></tr><tr style="background: #f8fafc;"><td style="padding: 11px; border: 1px solid #e2e8f0; font-weight: 600;">DR14G-152</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color: #059669; font-weight: 600;">Complete</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center;">4h 23m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight:700; color:#0284c7; background:#f0f9ff;">3h 39m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color:#475569;">4h 23m</td></tr><tr style="background: #f8fafc;"><td style="padding: 11px; border: 1px solid #e2e8f0; font-weight: 600;">DR14G-153</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color: #f59e0b; font-weight: 600;">Wip</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center;">0h 58m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight:700; color:#0284c7; background:#f0f9ff;">0h 42m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color:#475569;">0h 58m</td></tr><tr style="background: #f8fafc;"><td style="padding: 11px; border: 1px solid #e2e8f0; font-weight: 600;">DR14G-154</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color: #f59e0b; font-weight: 600;">Wip</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center;">1h 2m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight:700; color:#0284c7; background:#f0f9ff;">0h 42m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color:#475569;">1h 2m</td></tr></table>
        </div>
    </div>

    <div id="infoModal" class="modal-overlay">
        <div class="modal-box">
            <span class="modal-close" onclick="closeInfoModal()">&times;</span>
            <div class="modal-header" id="infoModalHeader">Title</div>
            <div id="infoModalContent"></div>
        </div>
    </div>
    
    <div id="listModal" class="modal-overlay">
        <div class="modal-box">
            <span class="modal-close" onclick="closeListModal()">&times;</span>
            <div class="modal-header" id="listModalHeader">System List</div>
            <div class="modal-section">
                <div class="modal-content" id="listModalContent" style="background: white; border: none; padding: 0;"></div>
            </div>
        </div>
    </div>

    <script>
        const timelineData = {"DR14G-148": [{"event": "FAT", "duration_min": 3, "working_min": 3, "idle_min": 0, "start_time": "2026-01-09 11:14:23", "failures": "2026-01-09 11:16:52,024 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB1][FAIL@B02002014] PHY1 Exec command:ipmitool raw 0x30 0x81 0x00 0x0 0x0 unsuccessful!\n2026-01-09 11:16:52,295 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB1][FAIL@B02002014] PHY2 Exec command:ipmitool raw 0x30 0x81 0x00 0x0 0x1 unsuccessful!\n2026-01-09 11:16:52,558 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB1][FAIL@B02002014] PHY3 Exec command:ipmitool raw 0x30 0x81 0x00 0x0 0x2 unsuccessful!\n2026-01-09 11:16:52,790 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB1][FAIL@B02002014] PHY4 Exec command:ipmitool raw 0x30 0x81 0x00 0x0 0x3 unsuccessful!\n2026-01-09 11:16:53,017 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB1][FAIL@B02002014] PHY5 Exec command:ipmitool raw 0x30 0x81 0x00 0x0 0x4 unsuccessful!\n2026-01-09 11:16:53,305 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB1][FAIL@B02002014] PHY6 Exec command:ipmitool raw 0x30 0x81 0x00 0x0 0x5 unsuccessful!\n2026-01-09 11:16:53,512 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB1][FAIL@B02002014] PHY7 Exec command:ipmitool raw 0x30 0x81 0x00 0x0 0x6 unsuccessful!\n2026-01-09 11:16:53,732 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB2][FAIL@B02002014] PHY1 Exec command:ipmitool raw 0x30 0x81 0x00 0x1 0x0 unsuccessful!\n2026-01-09 11:16:53,972 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB2][FAIL@B02002014] PHY2 Exec command:ipmitool raw 0x30 0x81 0x00 0x1 0x1 unsuccessful!\n2026-01-09 11:16:54,457 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB2][FAIL@B02002014] PHY3 Exec command:ipmitool raw 0x30 0x81 0x00 0x1 0x2 unsuccessful!\n2026-01-09 11:16:54,815 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB2][FAIL@B02002014] PHY4 Exec command:ipmitool raw 0x30 0x81 0x00 0x1 0x3 unsuccessful!\n2026-01-09 11:16:55,188 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB2][FAIL@B02002014] PHY5 Exec command:ipmitool raw 0x30 0x81 0x00 0x1 0x4 unsuccessful!\n2026-01-09 11:16:55,536 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB2][FAIL@B02002014] PHY6 Exec command:ipmitool raw 0x30 0x81 0x00 0x1 0x5 unsuccessful!\n2026-01-09 11:16:55,888 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB2][FAIL@B02002014] PHY7 Exec command:ipmitool raw 0x30 0x81 0x00 0x1 0x6 unsuccessful!\n2026-01-09 11:16:56,124 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB3][FAIL@B02002014] PHY1 Exec command:ipmitool raw 0x30 0x81 0x00 0x2 0x0 unsuccessful!\n2026-01-09 11:16:56,378 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB3][FAIL@B02002014] PHY2 Exec command:ipmitool raw 0x30 0x81 0x00 0x2 0x1 unsuccessful!\n2026-01-09 11:16:56,614 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB3][FAIL@B02002014] PHY3 Exec command:ipmitool raw 0x30 0x81 0x00 0x2 0x2 unsuccessful!\n2026-01-09 11:16:56,868 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB3][FAIL@B02002014] PHY4 Exec command:ipmitool raw 0x30 0x81 0x00 0x2 0x3 unsuccessful!\n2026-01-09 11:16:57,128 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB3][FAIL@B02002014] PHY5 Exec command:ipmitool raw 0x30 0x81 0x00 0x2 0x4 unsuccessful!\n2026-01-09 11:16:57,392 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB3][FAIL@B02002014] PHY6 Exec command:ipmitool raw 0x30 0x81 0x00 0x2 0x5 unsuccessful!\n2026-01-09 11:16:57,616 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB3][FAIL@B02002014] PHY7 Exec command:ipmitool raw 0x30 0x81 0x00 0x2 0x6 unsuccessful!\n2026-01-09 11:16:57,848 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB4][FAIL@B02002014] PHY1 Exec command:ipmitool raw 0x30 0x81 0x00 0x3 0x0 unsuccessful!\n2026-01-09 11:16:58,088 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB4][FAIL@B02002014] PHY2 Exec command:ipmitool raw 0x30 0x81 0x00 0x3 0x1 unsuccessful!\n2026-01-09 11:16:58,360 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB4][FAIL@B02002014] PHY3 Exec command:ipmitool raw 0x30 0x81 0x00 0x3 0x2 unsuccessful!\n2026-01-09 11:16:58,588 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB4][FAIL@B02002014] PHY4 Exec command:ipmitool raw 0x30 0x81 0x00 0x3 0x3 unsuccessful!\n2026-01-09 11:16:58,872 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB4][FAIL@B02002014] PHY5 Exec command:ipmitool raw 0x30 0x81 0x00 0x3 0x4 unsuccessful!\n2026-01-09 11:16:59,132 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB4][FAIL@B02002014] PHY6 Exec command:ipmitool raw 0x30 0x81 0x00 0x3 0x5 unsuccessful!\n2026-01-09 11:16:59,386 - ERROR - [ARC_BMC_UBB_PHY_VER_CHECK][UBB4][FAIL@B02002014] PHY7 Exec command:ipmitool raw 0x30 0x81 0x00 0x3 0x6 unsuccessful!\n-> [CHECKPOINT FAIL] BMC, ARC BMC UBB PHY VERSION CHECK [arc_bmc_ubb_phy_ver_check]", "replacements": "", "result": "FAIL"}], "DR14G-149": [{"event": "PRETEST", "duration_min": 10, "working_min": 10, "idle_min": 0, "start_time": "2026-01-09 13:37:03", "failures": "", "replacements": "", "result": "PASS"}, {"event": "FAT", "duration_min": 30, "working_min": 30, "idle_min": 16, "start_time": "2026-01-09 14:03:44", "failures": "", "replacements": "", "result": "PASS"}], "DR14G-151": [{"event": "PRETEST", "duration_min": 10, "working_min": 10, "idle_min": 0, "start_time": "2026-01-09 11:41:16", "failures": "2026-01-09 11:50:51,715 - ERROR - [ARC_BMC_I2C_UBB_TEST][UBB2][FAIL@] I2C - UBB2 test Not Pass!\n-> [CHECKPOINT FAIL] BMC, ARC BMC I2C UBB TEST [arc_bmc_i2c_ubb_test]", "replacements": "", "result": "FAIL"}, {"event": "PRETEST", "duration_min": 3, "working_min": 3, "idle_min": 200, "start_time": "2026-01-09 15:12:06", "failures": "", "replacements": "", "result": "PASS"}, {"event": "FAT", "duration_min": 17, "working_min": 17, "idle_min": 16, "start_time": "2026-01-09 15:31:31", "failures": "2026-01-09 15:48:24,393 - ERROR - [FT_ETH_STRESS][FAIL@] FT_ETH_STRESS test NOT Pass!\n-> [CHECKPOINT FAIL] GPU, TT UBB FUNC ETH STRESS TEST [tt_ft_ubb_eth_stress_test]", "replacements": "", "result": "FAIL"}], "DR14G-152": [{"event": "PRETEST", "duration_min": 10, "working_min": 10, "idle_min": 0, "start_time": "2026-01-09 12:08:36", "failures": "", "replacements": "", "result": "PASS"}, {"event": "FAT", "duration_min": 30, "working_min": 30, "idle_min": 16, "start_time": "2026-01-09 12:35:12", "failures": "", "replacements": "", "result": "PASS"}, {"event": "FRO", "duration_min": 145, "working_min": 145, "idle_min": 13, "start_time": "2026-01-09 13:18:39", "failures": "", "replacements": "", "result": "PASS"}, {"event": "FFT", "duration_min": 34, "working_min": 34, "idle_min": 14, "start_time": "2026-01-09 15:57:55", "failures": "", "replacements": "", "result": "PASS"}], "DR14G-153": [{"event": "PRETEST", "duration_min": 12, "working_min": 12, "idle_min": 0, "start_time": "2026-01-09 13:45:51", "failures": "", "replacements": "", "result": "PASS"}, {"event": "FAT", "duration_min": 30, "working_min": 30, "idle_min": 16, "start_time": "2026-01-09 14:14:31", "failures": "", "replacements": "", "result": "PASS"}], "DR14G-154": [{"event": "PRETEST", "duration_min": 12, "working_min": 12, "idle_min": 0, "start_time": "2026-01-09 14:15:10", "failures": "", "replacements": "", "result": "PASS"}, {"event": "FAT", "duration_min": 30, "working_min": 30, "idle_min": 20, "start_time": "2026-01-09 14:47:43", "failures": "", "replacements": "", "result": "PASS"}]};
        const categoryLists = {"first_pass": ["DR14G-152"], "pass": [], "wip": ["DR14G-148", "DR14G-149", "DR14G-151", "DR14G-153", "DR14G-154"], "unknown": []};
        const systems = Object.keys(timelineData).sort();
        const grossExampleHtml = decodeBase64("PHN0cm9uZz5FeGFtcGxlOiBEUjE0Ry0xNTI8L3N0cm9uZz48YnI+PHNwYW4gc3R5bGU9J2NvbG9yOiM2NDc0OGI7IGZvbnQtc2l6ZToxMnB4Oyc+U3RhcnQ6IDAxLTA5IDEyOjA4IHwgRW5kOiAwMS0wOSAxNjozMTwvc3Bhbj48YnI+PGRpdiBzdHlsZT0nbWFyZ2luLXRvcDo4cHg7IHBhZGRpbmc6OHB4OyBiYWNrZ3JvdW5kOiNmMWY1Zjk7IGJvcmRlci1yYWRpdXM6NHB4Oyc+4oCiIEZyaSAwMS0wOTogPHN0cm9uZz40aCAyM208L3N0cm9uZz48L2Rpdj48ZGl2IHN0eWxlPSdtYXJnaW4tdG9wOjVweDsgdGV4dC1hbGlnbjpyaWdodDsnPjwvZGl2Pg==");
        const fpyListHtml = decodeBase64("PGRpdiBzdHlsZT0ibWF4LWhlaWdodDoyMDBweDsgb3ZlcmZsb3cteTphdXRvOyBib3JkZXI6MXB4IHNvbGlkICNlMmU4ZjA7IHBhZGRpbmc6MTBweDsgYm9yZGVyLXJhZGl1czo0cHg7Ij48dGFibGUgc3R5bGU9IndpZHRoOjEwMCU7IGZvbnQtc2l6ZToxM3B4OyI+PHRyPjx0ZCBzdHlsZT0icGFkZGluZzo0cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNmMWY1Zjk7Ij5EUjE0Ry0xNTI8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo0cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNmMWY1Zjk7IHRleHQtYWxpZ246cmlnaHQ7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiMwNTk2Njk7Ij40aCAyM208L3RkPjwvdHI+PC90YWJsZT48L2Rpdj4=");
        
        // KPI Definitions for Modal
        const kpiDefinitions = {
            'throughput': {
                title: 'Throughput (Weekly)',
                content: `
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Calculation</div>
                        (Completed Units / Total Days in Dataset) * 7
                    </div>
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Logic</div>
                        Estimates your weekly production capacity based on the timespan of the logs you uploaded. Only counts systems with a final "PASS" (First-Pass or Recovered).
                    </div>`
            },
            'fpy_runtime': {
                title: 'Avg Assembly Runtime (FPY)',
                content: `
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Calculation</div>
                        Average Assembly Runtime within working hours for First-Pass units.
                    </div>
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">System Breakdown (Sorted by Time)</div>
                        ` + fpyListHtml + `
                    </div>`
            },
            'downtime': {
                title: 'Avg Downtime per Failure',
                content: `
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Calculation</div>
                        Sum(Gap Duration immediately following a FAIL event) / Total Failure Count
                    </div>
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Logic</div>
                        Measures the average "dead time" (gap) that occurs right after a test fails. This indicates how long the unit typically sits idle waiting for debug or a retry after a failure.
                    </div>`
            },
            'net': {
                title: 'Avg Test Runtime',
                content: `
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Calculation</div>
                        Sum of all active test event durations.
                    </div>
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Example</div>
                        - Test A: 10 mins<br>
                        - (Idle Gap: 5 hours)<br>
                        - Test B: 10 mins<br>
                        = <strong>20 mins Net Active Time</strong>
                    </div>`
            },
            'gross': {
                title: 'Avg Assembly Runtime (APY)',
                content: `
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Calculation</div>
                        Total duration falling within shift hours (8:00 - 20:00).
                    </div>
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Logic</div>
                        Average runtime for <strong>ALL</strong> completed units (both First-Pass and Recovered), filtered by shift hours.
                    </div>
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Real Data Example</div>
                        ` + grossExampleHtml + `
                    </div>`
            }
        };

        function decodeBase64(str) {
            try { return decodeURIComponent(atob(str).split('').map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join('')); }
            catch(e) { return str; }
        }

        function switchTab(tabName, btn) {
            document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.btn').forEach(el => el.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            btn.classList.add('active');
            if (tabName === 'detailed' && systems.length > 0) { renderDetailedTimeline(document.getElementById('system-selector').value || systems[0]); }
        }

        function showKpiInfo(type) {
            const def = kpiDefinitions[type];
            if(def) {
                document.getElementById('infoModalHeader').textContent = def.title;
                document.getElementById('infoModalContent').innerHTML = def.content;
                document.getElementById('infoModal').classList.add('active');
            }
        }
        function closeInfoModal() { document.getElementById('infoModal').classList.remove('active'); }
        document.getElementById('infoModal').addEventListener('click', function(e) { if (e.target === this) closeInfoModal(); });

        function showFailureDetail(eventName, failuresB64, replB64) {
            document.getElementById('infoModalHeader').textContent = 'Event Details: ' + eventName;
            const fail = decodeBase64(failuresB64) || '(No failures)';
            const repl = decodeBase64(replB64) || '(No replacements)';
            const content = '<div class="modal-section"><div class="modal-label">Failures</div><div class="modal-content">' + fail + '</div></div>' +
                            '<div class="modal-section"><div class="modal-label" style="color:#d97706">Replacements</div><div class="modal-content" style="background:#fffbeb; color:#92400e;">' + repl + '</div></div>';
            document.getElementById('infoModalContent').innerHTML = content;
            document.getElementById('infoModal').classList.add('active');
        }
        
        function showSystemList(title, listKey) {
            document.getElementById('listModalHeader').textContent = title;
            const list = categoryLists[listKey] || [];
            if (list.length === 0) {
                document.getElementById('listModalContent').innerHTML = '<p style="color:#666; font-style:italic;">No systems in this category.</p>';
            } else {
                let html = '<ul style="list-style: none; padding: 0;">';
                list.forEach(sys => {
                    html += '<li style="padding: 8px 12px; border-bottom: 1px solid #eee; display:flex; justify-content:space-between; align-items:center;">' + 
                            '<span style="font-weight:500;">' + sys + '</span>' +
                            '<button onclick="jumpToSystem(\'' + sys + '\')" style="padding:4px 8px; font-size:12px; border:1px solid #ccc; background:#fff; border-radius:4px; cursor:pointer;">View</button>' +
                            '</li>';
                });
                html += '</ul>';
                document.getElementById('listModalContent').innerHTML = html;
            }
            document.getElementById('listModal').classList.add('active');
        }
        function closeListModal() { document.getElementById('listModal').classList.remove('active'); }
        document.getElementById('listModal').addEventListener('click', function(e) { if (e.target === this) closeListModal(); });

        function jumpToSystem(sysName) {
            closeListModal();
            switchTab('timeline', document.querySelector('.controls .btn:first-child'));
            const el = document.querySelector('.sys[data-system="' + sysName + '"]');
            if (el) {
                el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                el.style.border = '2px solid #0066cc';
                setTimeout(() => { el.style.border = '1px solid #e2e8f0'; }, 2000);
            }
        }

        document.addEventListener('keydown', function(e) { 
            if (e.key === 'Escape') { closeInfoModal(); closeListModal(); }
        });

        function renderDetailedTimeline(systemName) {
            const events = timelineData[systemName];
            if (!events) return;
            let html = '<table style="width: 100%; border-collapse: collapse; font-size: 14px;"><tr style="background: #1e3a5f; color: white;"><th style="padding: 11px;">Event</th><th style="padding: 11px;">Duration</th><th style="padding: 11px;">Net Active Time</th><th style="padding: 11px;">Failures</th><th style="padding: 11px;">Replacements</th></tr>';
            events.forEach(evt => {
                const dur = evt.duration_min + 'm';
                const work = (evt.working_min || 0) + 'm';
                html += '<tr style="background: #f8fafc;"><td style="padding: 11px; border: 1px solid #e2e8f0;">'+evt.event+'</td><td style="padding: 11px; border: 1px solid #e2e8f0;">'+dur+'</td><td style="padding: 11px; border: 1px solid #e2e8f0; color:#0284c7; font-weight:600;">'+work+'</td><td style="padding: 11px; border: 1px solid #e2e8f0;">'+(evt.failures||'-')+'</td><td style="padding: 11px; border: 1px solid #e2e8f0; color:#d97706; font-weight:500;">'+(evt.replacements||'-')+'</td></tr>';
            });
            html += '</table>';
            document.getElementById('detailed-content').innerHTML = html;
        }
        
        if (systems.length > 0) { document.getElementById('system-selector').value = systems[0]; }
    </script>
</body>
</html>