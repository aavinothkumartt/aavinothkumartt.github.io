<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test Station Dashboard v6.5</title>
    <style>
        :root { --primary: #1e3a5f; --accent: #0066cc; --bg: #f8fafc; --surface: #ffffff; --text: #0f172a; --text-secondary: #475569; --border: #e2e8f0; --border-light: #f1f5f9; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); padding: 29px; }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { font-size: 29px; font-weight: 700; margin-bottom: 5px; }
        h2 { font-size: 21px; font-weight: 700; margin-bottom: 19px; }
        .controls { display: flex; gap: 10px; margin-bottom: 29px; flex-wrap: wrap; }
        .btn { padding: 10px 16px; border: 1px solid var(--border); border-radius: 6px; background: var(--surface); cursor: pointer; font-size: 16px; font-weight: 500; color: var(--text-secondary); transition: all 150ms ease; }
        .btn:hover { border-color: var(--accent); color: var(--accent); background: #f0f4ff; }
        .btn.active { background: var(--primary); color: white; border-color: var(--primary); }
        
        .kpi-header { font-size: 16px; font-weight: 700; color: #1e3a5f; margin-bottom: 10px; margin-top: 20px; text-transform:uppercase; letter-spacing:0.5px; border-bottom: 2px solid #e2e8f0; padding-bottom: 5px; display:inline-block; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 14px; margin-bottom: 10px; }
        
        .stat-card { background: var(--surface); padding: 19px; border-radius: 7px; border: 1px solid var(--border); transition: transform 0.1s; display:flex; flex-direction:column; justify-content:space-between; position:relative; }
        .stat-card[onclick]:hover { transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); border-color: var(--accent); cursor:pointer; }
        .stat-label { font-size: 13px; color: var(--text-secondary); text-transform: uppercase; margin-bottom: 10px; font-weight: 600; letter-spacing: 0.5px; }
        .stat-value { font-size: 26px; font-weight: 700; color: var(--primary); }
        .stat-sub { font-size: 12px; color: #94a3b8; margin-top: 4px; font-weight: 500; }
        
        .info-icon { position: absolute; top: 10px; right: 10px; opacity: 0; transition: opacity 0.2s; color: var(--accent); font-size: 14px; }
        .stat-card:hover .info-icon { opacity: 1; }

        .view { background: var(--surface); padding: 24px; border-radius: 7px; border: 1px solid var(--border); display: none; }
        .view.active { display: block; }
        .station-section { margin: 19px 0; padding: 19px; background: var(--bg); border-radius: 7px; border: 1px solid var(--border); }
        .timeline-row { display: flex; flex-wrap: nowrap; align-items: center; gap: 0; overflow-x: auto; padding-bottom: 10px; }
        .sys { padding: 14px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg); margin: 0; flex-shrink: 0; }
        .label { font-weight: 600; color: var(--primary); margin-bottom: 5px; font-size: 15px; }
        .timestamps { font-size: 13px; color: var(--text-secondary); margin-bottom: 10px; }
        .track { display: flex; height: 72px; background: white; border: 1px solid var(--border); border-radius: 5px; overflow: hidden; }
        .seg { flex: 1; cursor: pointer; border-right: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; position: relative; }
        .seg-label { font-size: 12px; color: white; font-weight: 600; text-align: center; padding: 4px; }
        .seg.idle { background: linear-gradient(135deg, #cbd5e1, #94a3b8); }
        .seg.event.pass { background: linear-gradient(135deg, #059669, #047857); }
        .seg.event.fail { background: linear-gradient(135deg, #dc2626, #b91c1c); }
        .seg.event.fail.clickable:hover { filter: brightness(0.9); }
        .gap-card { background: linear-gradient(135deg, rgba(100,150,255,0.08), rgba(150,180,255,0.08)); border: 1px solid rgba(100,150,255,0.25); border-radius: 5px; padding: 8px 10px; font-size: 12px; color: var(--text-secondary); margin: 0; flex-shrink: 0; line-height: 1.2; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 4px; min-width: 90px; max-width: 110px; }
        .gap-card strong { color: #0066cc; font-weight: 700; font-size: 16px; line-height: 1; }
        .gap-card.after-hours { background: linear-gradient(135deg, rgba(138,99,77,0.1), rgba(168,108,78,0.1)); border: 1px solid rgba(138,99,77,0.3); }
        .gap-card.after-hours strong { color: #8A6344; }
        .legend { display: flex; gap: 19px; margin-top: 21px; flex-wrap: wrap; font-size: 14px; }
        .legend-item { display: flex; align-items: center; gap: 7px; }
        .legend-box { width: 16px; height: 16px; border-radius: 4px; }
        .detailed-table-wrapper { overflow-x: auto; }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; }
        .modal-overlay.active { display: flex; }
        .modal-box { background: white; border-radius: 8px; padding: 24px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
        .modal-header { font-size: 20px; font-weight: 700; color: #1e3a5f; margin-bottom: 16px; border-bottom: 2px solid #e2e8f0; padding-bottom: 12px; }
        .modal-section { margin-bottom: 20px; }
        .modal-label { font-size: 13px; font-weight: 600; color: #475569; text-transform: uppercase; margin-bottom: 8px; }
        .modal-content { white-space: pre-wrap; word-break: break-word; line-height: 1.6; color: #0f172a; padding: 12px; background: #f8fafc; border-radius: 6px; border-left: 3px solid #0066cc; }
        .modal-close { float: right; font-size: 24px; font-weight: bold; color: #aaa; cursor: pointer; line-height: 1; }
        .kpi-def-block { margin-bottom: 15px; border-left: 3px solid #0066cc; padding-left: 15px; }
        .kpi-def-title { font-weight: 700; color: #1e3a5f; margin-bottom: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Test Station Dashboard</h1>
        <div class="controls">
            <button class="btn active" onclick="switchTab('timeline', this)">Timeline View</button>
            <button class="btn" onclick="switchTab('replacements', this)">Component Replacement Summary</button>
            <button class="btn" onclick="switchTab('detailed', this)">Detailed</button>
            <button class="btn" onclick="switchTab('stats', this)">Stats</button>
        </div>
        
        <div id="timeline" class="view active">
            
            <div class="kpi-header">Production KPIs</div>
            <div class="stats-grid">
                <div class="stat-card" onclick="showKpiInfo('throughput')">
                    <div class="info-icon">‚ÑπÔ∏è</div>
                    <div class="stat-label">Throughput (Weekly)</div>
                    <div class="stat-value">0.0</div>
                    <div class="stat-sub">Units per week</div>
                </div>
                <div class="stat-card" onclick="showKpiInfo('fpy_runtime')">
                    <div class="info-icon">‚ÑπÔ∏è</div>
                    <div class="stat-label">Avg Assembly Runtime (FPY)</div>
                    <div class="stat-value">0h 0m</div>
                    <div class="stat-sub">Shift Time (First-Pass Units)</div>
                </div>
                <div class="stat-card" onclick="showKpiInfo('downtime')">
                    <div class="info-icon">‚ÑπÔ∏è</div>
                    <div class="stat-label">Avg Downtime / Failure</div>
                    <div class="stat-value">4h 5m</div>
                    <div class="stat-sub">Shift-based idle after fail</div>
                </div>
                <div class="stat-card" onclick="showKpiInfo('net')">
                    <div class="info-icon">‚ÑπÔ∏è</div>
                    <div class="stat-label">Avg Test Runtime</div>
                    <div class="stat-value" style="color:#0284c7;">0h 0m</div>
                    <div class="stat-sub">Strictly testing time (No Gaps)</div>
                </div>
                <div class="stat-card" onclick="showKpiInfo('gross')">
                    <div class="info-icon">‚ÑπÔ∏è</div>
                    <div class="stat-label">Avg Assembly Runtime (APY)</div>
                    <div class="stat-value" style="color:#64748b;">0h 0m</div>
                    <div class="stat-sub">Testing + Idle (Within Shift)</div>
                </div>
            </div>

            <div class="kpi-header">Overall Yield Summary</div>
            <div class="stats-grid">
                <div class="stat-card">
                   <div class="stat-label">Total Units</div>
                   <div class="stat-value">2</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">FPY (First-Pass)</div>
                    <div class="stat-value" style="color: #059669;">0.0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">APY (All-Pass)</div>
                    <div class="stat-value" style="color: #10b981;">0.0%</div>
                </div>
                
                <div class="stat-card" style="cursor: pointer;" onclick="showSystemList('First-Pass Systems', 'first_pass')">
                    <div class="stat-label">First-Pass</div>
                    <div class="stat-value" style="color: #059669;">0</div>
                </div>
                <div class="stat-card" style="cursor: pointer;" onclick="showSystemList('Recovered Systems', 'pass')">
                    <div class="stat-label">Recovered</div>
                    <div class="stat-value" style="color: #10b981;">0</div>
                </div>
                <div class="stat-card" style="cursor: pointer;" onclick="showSystemList('WIP Systems', 'wip')">
                    <div class="stat-label">WIP</div>
                    <div class="stat-value" style="color: #f59e0b;">2</div>
                </div>
                
            </div>
            
            <h2 style="margin-top: 32px; margin-bottom: 10px;">System Timeline</h2>
            <p style="color: #666; font-size: 14px; margin-bottom: 19px;">üí° Scroll right. <strong>Click blocks</strong> for details.</p>
            
			<div class="station-section">
				<h3 style="color: #1e3a5f; margin: 0 0 6px 0; font-size: 18px; font-weight: 600;">Test Station 2A124</h3>
				<p style="color: #475569; margin: 0 0 18px 0; font-size: 14px;">Record of 1 systems (1 WIP)</p>
				<div class="timeline-row"><div class="sys" data-system="D2K-76" data-start="2026-01-08 14:34" data-finish="2026-01-12 16:08"><div class="label">D2K-76</div><div class="timestamps info-verbose">Start: 2026-01-08 14:34 Finish: 2026-01-12 16:08</div><div class="track"><div class="seg event pass clickable" style="width: 0.05124701059104886%; position: relative;" title="2026-01-08 14:34:05 (Work: 3m)" onclick="showFailureDetail('PRETEST', '', 'QWRkZWQ6IFJBTSxSQU0oOTZHKUREUjUtNTYwMCBSIE0zMjFSWUdBMFBCMChYODApWDQKTUlTU0lORyAtPiA1MjVGNDQ2NCwgNTI1RjQ2REYsIDUyNUY0RDM4LCA1MjVGNEQzOSwgNTI1RjREM0EsIDUyNUY0RDVD')"><span class="seg-label">PRETEST 3m</span><div style="position:absolute; top:-6px; right:-6px; background:#fbbf24; color:black; font-size:9px; width:12px; height:12px; border-radius:50%; text-align:center; line-height:12px; border:1px solid white;">R</div></div><div class="seg idle" style="width: 0.2562350529552443%; min-width: 10px;" title="2026-01-08 14:52:54 (Work: 2m)"><span class="seg-label">15m</span></div><div class="seg event fail clickable" style="width: 0.0341646737273659%; position: relative;" title="2026-01-08 14:52:54 (Work: 2m)" onclick="showFailureDetail('FAT', 'LT4gMjAyNi0wMS0wOCAxNDo1NDo1Miw5MTQgLSBJTkZPIC0gW1JFU1VMVF0gPDE4PiBQQ0lFLCBBUkMgUENJRVVCQiAgREVWSUNFIENIRUNLIFthcmNfcGNpZV91YmJfZGV2aWNlX2NoZWNrXSAtIDAgbWluIDAuMTIwIHNlYyAtIEZBSUw=', 'UmVwbGFjZWQ6IEZBTixTN0cgRkFOClNPTDI2TUY1RkEwMDIwNDVDMkEwMUQ2IC0+IFNPTDI2TUY1RkEwMDIwNDVDMkEwMTJY')"><span class="seg-label">FAT 2m</span><div style="position:absolute; top:-6px; right:-6px; background:#fbbf24; color:black; font-size:9px; width:12px; height:12px; border-radius:50%; text-align:center; line-height:12px; border:1px solid white;">R</div></div><div class="seg idle" style="width: 1.5715749914588315%; min-width: 10px;" title="2026-01-08 16:27:25 (Work: 4m)"><span class="seg-label">1h 32m</span></div><div class="seg event pass" style="width: 0.0683293474547318%; position: relative;" title="2026-01-08 16:27:25 (Work: 4m)" ><span class="seg-label">PRETEST 4m</span></div><div class="seg idle" style="width: 0.5637171165015374%; min-width: 10px;" title="2026-01-08 17:05:03 (Work: 6m)"><span class="seg-label">33m</span></div><div class="seg event pass" style="width: 0.10249402118209772%; position: relative;" title="2026-01-08 17:05:03 (Work: 6m)" ><span class="seg-label">PRETEST 6m</span></div><div class="seg idle" style="width: 0.2562350529552443%; min-width: 10px;" title="2026-01-08 17:26:39 (Work: 6m)"><span class="seg-label">15m</span></div><div class="seg event fail clickable" style="width: 0.10249402118209772%; position: relative;" title="2026-01-08 17:26:39 (Work: 6m)" onclick="showFailureDetail('FAT', 'LT4gMjAyNi0wMS0wOCAxNzozMjozNiw1NDQgLSBJTkZPIC0gW1JFU1VMVF0gPDMzPiBTVE9SQUdFLCBBUkMgU1RPUkFHRSBVU0IgRklPIFJFQUQgVEVTVCBbYXJjX3N0b3JhZ2VfdXNiX2Zpb19yZWFkX3Rlc3RdIC0gMCBtaW4gMTAuMzc3IHNlYyAtIEZBSUw=', 'UmVwbGFjZWQ6IFBBTkVMLFM3VCBQQU5FTCBCRCBBU1NZClM3VFlCQjFDMjUxMDAxMDc5IC0+IFM3VFlCQjFDMjUxMDAxMDA4')"><span class="seg-label">FAT 6m</span><div style="position:absolute; top:-6px; right:-6px; background:#fbbf24; color:black; font-size:9px; width:12px; height:12px; border-radius:50%; text-align:center; line-height:12px; border:1px solid white;">R</div></div><div class="seg idle" style="width: 15.425350187905707%; min-width: 10px;" title="2026-01-09 08:35:39 (Work: 5m)"><span class="seg-label">15h 3m</span></div><div class="seg event pass" style="width: 0.08541168431841477%; position: relative;" title="2026-01-09 08:35:39 (Work: 5m)" ><span class="seg-label">PRETEST 5m</span></div><div class="seg idle" style="width: 0.2562350529552443%; min-width: 10px;" title="2026-01-09 08:56:23 (Work: 6m)"><span class="seg-label">15m</span></div><div class="seg event fail clickable" style="width: 0.10249402118209772%; position: relative;" title="2026-01-09 08:56:23 (Work: 6m)" onclick="showFailureDetail('FAT', 'LT4gMjAyNi0wMS0wOSAwOTowMjoxNiwyMDIgLSBJTkZPIC0gW1JFU1VMVF0gPDMzPiBTVE9SQUdFLCBBUkMgU1RPUkFHRSBVU0IgRklPIFJFQUQgVEVTVCBbYXJjX3N0b3JhZ2VfdXNiX2Zpb19yZWFkX3Rlc3RdIC0gMCBtaW4gMTAuMzY0IHNlYyAtIEZBSUwKMjAyNi0wMS0wOSAwOTowMjo0NiwwNzEgLSBFUlJPUiAtIFtBUkNfVVVUX1NZU0xPR19DTEVBUl1bRkFJTEBdIFN5c2xvZyBjbGVhciBOT1QgUGFzcyE=', 'UmVwbGFjZWQ6IFBEQixTN1RLIFBEQiBCRCBBU1NZClM3VEtQQkFCMUsyNTEwMjMwMzggLT4gUzdUS1BCQUIxSzI1MTAyMzA0Mg==')"><span class="seg-label">FAT 6m</span><div style="position:absolute; top:-6px; right:-6px; background:#fbbf24; color:black; font-size:9px; width:12px; height:12px; border-radius:50%; text-align:center; line-height:12px; border:1px solid white;">R</div></div><div class="seg idle" style="width: 7.9091219678852065%; min-width: 10px;" title="2026-01-09 16:46:06 (Work: 6m)"><span class="seg-label">7h 43m</span></div><div class="seg event pass" style="width: 0.10249402118209772%; position: relative;" title="2026-01-09 16:46:06 (Work: 6m)" ><span class="seg-label">PRETEST 6m</span></div><div class="seg idle" style="width: 0.2562350529552443%; min-width: 10px;" title="2026-01-09 17:07:14 (Work: 6m)"><span class="seg-label">15m</span></div><div class="seg event fail clickable" style="width: 0.10249402118209772%; position: relative;" title="2026-01-09 17:07:14 (Work: 6m)" onclick="showFailureDetail('FAT', 'LT4gMjAyNi0wMS0wOSAxNzoxMzowNSw1NzkgLSBJTkZPIC0gW1JFU1VMVF0gPDMzPiBTVE9SQUdFLCBBUkMgU1RPUkFHRSBVU0IgRklPIFJFQUQgVEVTVCBbYXJjX3N0b3JhZ2VfdXNiX2Zpb19yZWFkX3Rlc3RdIC0gMCBtaW4gMTAuNDA1IHNlYyAtIEZBSUw=', '')"><span class="seg-label">FAT 6m</span></div><div class="seg idle" style="width: 67.09941920054663%; min-width: 10px;" title="2026-01-12 10:41:53 (Work: 20m)"><span class="seg-label">2d 17h 28m</span></div><div class="seg event pass" style="width: 0.3416467372736591%; position: relative;" title="2026-01-12 10:41:53 (Work: 20m)" ><span class="seg-label">FAT 20m</span></div><div class="seg idle" style="width: 0.9053638537751963%; min-width: 10px;" title="2026-01-12 11:54:55 (Work: 15m)"><span class="seg-label">53m</span></div><div class="seg event fail clickable" style="width: 0.2562350529552443%; position: relative;" title="2026-01-12 11:54:55 (Work: 15m)" onclick="showFailureDetail('FRO', 'LT4gMjAyNi0wMS0xMiAxMjoxMDowOCwwMjcgLSBJTkZPIC0gW1JFU1VMVF0gPDE+IEdQVSwgVFQgVUJCIEZVTkMgQlVSTklOIFRFU1QgW3R0X2Z0X3ViYl90ZXN0X2J1cm5pbl0gLSAxNCBtaW4gNDAuNDU4IHNlYyAtIEZBSUw=', '')"><span class="seg-label">FRO 15m</span></div><div class="seg idle" style="width: 3.3652203621455414%; min-width: 10px;" title="2026-01-12 15:27:29 (Work: 46m)"><span class="seg-label">3h 17m</span></div><div class="seg event pass" style="width: 0.7857874957294158%; position: relative;" title="2026-01-12 15:27:29 (Work: 46m)" ><span class="seg-label">FRO 46m</span></div></div><div class="info info-verbose">Total: 4d 1h 34m (Test Runtime: 2h 5m)</div></div>
				</div>
			</div>
			<div class="station-section">
				<h3 style="color: #1e3a5f; margin: 0 0 6px 0; font-size: 18px; font-weight: 600;">Test Station 2A224</h3>
				<p style="color: #475569; margin: 0 0 18px 0; font-size: 14px;">Record of 1 systems (1 WIP)</p>
				<div class="timeline-row"><div class="sys" data-system="D2K-77" data-start="2026-01-08 10:09" data-finish="2026-01-08 18:20"><div class="label">D2K-77</div><div class="timestamps info-verbose">Start: 2026-01-08 10:09 Finish: 2026-01-08 18:20</div><div class="track"><div class="seg event fail clickable" style="width: 2.240325865580448%; position: relative;" title="2026-01-08 10:09:27 (Work: 11m)" onclick="showFailureDetail('PRETEST', 'MjAyNi0wMS0wOCAxMDoyMDozMyw1NTggLSBFUlJPUiAtIFtBUkNfQk1DX1BEQl9SRURSSVZFUl9GV19VUERBVEVdW0ZBSUxAXSBVcGxvYWRpbmcgUERCX1JFRFJJVkVSIGZhaWwhCjIwMjYtMDEtMDggMTA6MjA6MzMsNTYyIC0gRVJST1IgLSBbQVJDX0JNQ19QREJfUkVEUklWRVJfRldfVVBEQVRFXVtGQUlMQF0gVXBsb2FkaW5nIFBEQl9SRURSSVZFUiBmYWlsIQoyMDI2LTAxLTA4IDEwOjIwOjMzLDU2NiAtIEVSUk9SIC0gW0FSQ19CTUNfUERCX1JFRFJJVkVSX0ZXX1VQREFURV1bRkFJTEBdIFVwbG9hZGluZyBQREJfUkVEUklWRVIgZmFpbCEKMjAyNi0wMS0wOCAxMDoyMDozMyw1NzAgLSBFUlJPUiAtIFtBUkNfQk1DX1BEQl9SRURSSVZFUl9GV19VUERBVEVdW0ZBSUxAXSBVcGxvYWRpbmcgUERCX1JFRFJJVkVSIGZhaWwhCjIwMjYtMDEtMDggMTA6MjA6MzMsNTc0IC0gRVJST1IgLSBbQVJDX0JNQ19QREJfUkVEUklWRVJfRldfVVBEQVRFXVtGQUlMQF0gVGhlIFBEQl9SRURSSVZFUiBmaXJtd2FyZSB1cGRhdGUgTm90IFBhc3MhCi0+IDIwMjYtMDEtMDggMTA6MjA6MzMsNTc1IC0gSU5GTyAtIFtSRVNVTFRdIDw3PiBCTUMsIEFSQyBQREIgUkVEUklWRVIgRklSTVdBUkUgVVBEQVRFIFthcmNfYm1jX3BkYl9yZWRyaXZlcl9md191cGRhdGVdIC0gMCBtaW4gMC43NzYgc2VjIC0gRkFJTA==', '')"><span class="seg-label">PRETEST 11m</span></div><div class="seg idle" style="width: 30.14256619144603%; min-width: 10px;" title="2026-01-08 12:49:25 (Work: 4m)"><span class="seg-label">2h 28m</span></div><div class="seg event pass clickable" style="width: 0.8146639511201629%; position: relative;" title="2026-01-08 12:49:25 (Work: 4m)" onclick="showFailureDetail('PRETEST', '', 'QWRkZWQ6IFJBTSxSQU0oOTZHKUREUjUtNTYwMCBSIE0zMjFSWUdBMFBCMChYODApWDQKTUlTU0lORyAtPiA1MjVGNDQ2MiwgNTI1RjQ1MEEsIDUyNUY0NTBGLCA1MjVGNDUxMCwgNTI1RjQ4RjYsIDUyNUY0QzZC')"><span class="seg-label">PRETEST 4m</span><div style="position:absolute; top:-6px; right:-6px; background:#fbbf24; color:black; font-size:9px; width:12px; height:12px; border-radius:50%; text-align:center; line-height:12px; border:1px solid white;">R</div></div><div class="seg idle" style="width: 3.054989816700611%; min-width: 10px;" title="2026-01-08 13:08:41 (Work: 2m)"><span class="seg-label">15m</span></div><div class="seg event fail clickable" style="width: 0.40733197556008144%; position: relative;" title="2026-01-08 13:08:41 (Work: 2m)" onclick="showFailureDetail('FAT', 'MjAyNi0wMS0wOCAxMzoxMDoyMyw0NzMgLSBFUlJPUiAtIFtBUkNfQk1DX0NQTERfQ0hFQ0tdW1VCQjFdW0ZBSUxAXSA8VUJCMT4gOiBBU0lDM19hbGl2ZQotPiAyMDI2LTAxLTA4IDEzOjEwOjIzLDQ3NCAtIElORk8gLSBbUkVTVUxUXSA8MT4gQk1DLCBBUkMgQk1DIENQTEQgQ0hFQ0sgW2FyY19ibWNfY3BsZF9jaGVja10gLSAxIG1pbiAxNC40Nzcgc2VjIC0gRkFJTA==', '')"><span class="seg-label">FAT 2m</span></div><div class="seg idle" style="width: 62.93279022403259%; min-width: 10px;" title="2026-01-08 18:20:12 (Work: 2m)"><span class="seg-label">5h 9m</span></div><div class="seg event fail clickable" style="width: 0.40733197556008144%; position: relative;" title="2026-01-08 18:20:12 (Work: 2m)" onclick="showFailureDetail('PRETEST', 'LT4gMjAyNi0wMS0wOCAxODoyMTozNiwzMTMgLSBJTkZPIC0gW1JFU1VMVF0gPDEwPiBHUFUsIFRUIFVCQiBGVU5DIEZMQVNIIEZXIFt0dF9mdF91YmJfZmxhc2hfZnddIC0gMCBtaW4gNTMuNTg3IHNlYyAtIEZBSUw=', '')"><span class="seg-label">PRETEST 2m</span></div></div><div class="info info-verbose">Total: 8h 11m (Test Runtime: 19m)</div></div>
				</div>
			</div>
            <div class="legend">
                <div class="legend-item"><div class="legend-box" style="background: linear-gradient(135deg, #059669, #047857);"></div><span>Pass (Green)</span></div>
                <div class="legend-item"><div class="legend-box" style="background: linear-gradient(135deg, #dc2626, #b91c1c);"></div><span>Fail (Red)</span></div>
                <div class="legend-item"><div class="legend-box" style="background: linear-gradient(135deg, #cbd5e1, #94a3b8);"></div><span>Idle (Gray)</span></div>
                <div class="legend-item" style="border-left: 2px solid var(--border); padding-left: 14px;"><span>‚è∏ Normal gap | üåô After-hours</span></div>
            </div>
        </div>
        
        <div id="replacements" class="view">
            <h2>Component Replacement Summary</h2>
            <p style="color: #666; margin-bottom: 20px;">Aggregated count of replacements per phase. <strong>Hover over red cells</strong> to see potential causes.</p>
            <table style="width: 100%; border-collapse: collapse; font-size: 13px; margin-top: 10px;"><tr style="background: #1e3a5f; color: white;"><th style="padding: 12px; border: 1px solid #e2e8f0; text-align: center;">Component Name</th><th style="padding: 12px; border: 1px solid #e2e8f0; text-align: center;">PRETEST</th><th style="padding: 12px; border: 1px solid #e2e8f0; text-align: center;">FAT</th><th style="padding: 12px; border: 1px solid #e2e8f0; text-align: center;">FRO</th><th style="padding: 12px; border: 1px solid #e2e8f0; text-align: center;">FFT</th><th style="padding: 12px; border: 1px solid #e2e8f0; text-align: center;">FQA</th></tr><tr style="background: #ffffff; border-bottom: 1px solid #e2e8f0;"><td style="padding: 10px; border: 1px solid #e2e8f0; font-weight: 500; text-align: left; color: #334155;">FAN,S7G FAN</td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><div title="FAN,S7G FAN replaced in FAT

Failure Signatures:
‚Ä¢ -> 2026-01-09 17:13:05,579 - INFO - [RESULT] <33> STORAGE, ARC STORAGE USB FIO READ TEST [arc_storage_usb_fio_read_test] - 0 min 10.405 sec - FAIL (x1)" style="background: rgba(220, 38, 38, 0.35); color: #dc2626; border-radius: 4px; padding: 4px 8px; font-weight: 600; display: inline-block; cursor: help;">1</div></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td></tr><tr style="background: #ffffff; border-bottom: 1px solid #e2e8f0;"><td style="padding: 10px; border: 1px solid #e2e8f0; font-weight: 500; text-align: left; color: #334155;">PANEL,S7T PANEL BD ASSY</td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><div title="PANEL,S7T PANEL BD ASSY replaced in FAT

Failure Signatures:
‚Ä¢ -> 2026-01-09 17:13:05,579 - INFO - [RESULT] <33> STORAGE, ARC STORAGE USB FIO READ TEST [arc_storage_usb_fio_read_test] - 0 min 10.405 sec - FAIL (x1)" style="background: rgba(220, 38, 38, 0.35); color: #dc2626; border-radius: 4px; padding: 4px 8px; font-weight: 600; display: inline-block; cursor: help;">1</div></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td></tr><tr style="background: #ffffff; border-bottom: 1px solid #e2e8f0;"><td style="padding: 10px; border: 1px solid #e2e8f0; font-weight: 500; text-align: left; color: #334155;">PDB,S7TK PDB BD ASSY</td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><div title="PDB,S7TK PDB BD ASSY replaced in FAT

Failure Signatures:
‚Ä¢ -> 2026-01-09 17:13:05,579 - INFO - [RESULT] <33> STORAGE, ARC STORAGE USB FIO READ TEST [arc_storage_usb_fio_read_test] - 0 min 10.405 sec - FAIL (x1)" style="background: rgba(220, 38, 38, 0.35); color: #dc2626; border-radius: 4px; padding: 4px 8px; font-weight: 600; display: inline-block; cursor: help;">1</div></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td></tr><tr style="background: #ffffff; border-bottom: 1px solid #e2e8f0;"><td style="padding: 10px; border: 1px solid #e2e8f0; font-weight: 500; text-align: left; color: #334155;">RAM,RAM(96G)DDR5-5600 R M321RYGA0PB0(X80)X4</td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><div title="RAM,RAM(96G)DDR5-5600 R M321RYGA0PB0(X80)X4 replaced in PRETEST

Failure Signatures:
‚Ä¢ ERROR - [FLASH_FIRMWARE_PACKAGE][FAIL@] Exec script:/test/s7tk/tools/arc/asic/tt-funtest-scripts/bh/funtest_bh/funtest_bh --board-type GALAXY --single-test flash_firmware_package --test-level system --force 1 --reset-galaxy-board-id --fwbundle-path /test/s7tk/firmware/arc/asic/bh/fw_pack-19.4.2.fwbundle unsuccessful! (timeout:120)
-> 2026-01-08 11:28:15,183 - INFO - [RESULT] <10> GPU, TT UBB FUNC FLASH FW [tt_ft_ubb_flash_fw] - 0 min 13.800 sec - FAIL (x1)
‚Ä¢ -> 2026-01-08 18:21:36,313 - INFO - [RESULT] <10> GPU, TT UBB FUNC FLASH FW [tt_ft_ubb_flash_fw] - 0 min 53.587 sec - FAIL (x1)" style="background: rgba(220, 38, 38, 0.5); color: #dc2626; border-radius: 4px; padding: 4px 8px; font-weight: 600; display: inline-block; cursor: help;">2</div></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td><td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;"><span style="color: #e2e8f0;">-</span></td></tr></table>
            <h2 style="margin-top: 40px; border-top: 1px solid #e2e8f0; padding-top: 30px;">Component Failure Analysis</h2>
            <div style="margin-bottom: 30px; background: white; padding: 20px; border-radius: 8px; border: 1px solid #e2e8f0;"><h3 style="margin-top:0; color: #1e3a5f;">Top Replaced Components (Grouped)</h3><div style="margin-bottom: 12px;"><div style="display:flex; justify-content:space-between; font-size:13px; margin-bottom:4px; font-weight:600; color:#475569;"><span>RAM,RAM(96G)DDR5-5600 R M321RYGA0PB0(X80)X4</span><span>2</span></div><div style="width:100%; background:#f1f5f9; border-radius:4px; height:12px;"><div style="width:100.0%; background:#dc2626; height:100%; border-radius:4px;"></div></div></div><div style="margin-bottom: 12px;"><div style="display:flex; justify-content:space-between; font-size:13px; margin-bottom:4px; font-weight:600; color:#475569;"><span>FAN,S7G FAN</span><span>1</span></div><div style="width:100%; background:#f1f5f9; border-radius:4px; height:12px;"><div style="width:50.0%; background:#dc2626; height:100%; border-radius:4px;"></div></div></div><div style="margin-bottom: 12px;"><div style="display:flex; justify-content:space-between; font-size:13px; margin-bottom:4px; font-weight:600; color:#475569;"><span>PANEL,S7T PANEL BD ASSY</span><span>1</span></div><div style="width:100%; background:#f1f5f9; border-radius:4px; height:12px;"><div style="width:50.0%; background:#dc2626; height:100%; border-radius:4px;"></div></div></div><div style="margin-bottom: 12px;"><div style="display:flex; justify-content:space-between; font-size:13px; margin-bottom:4px; font-weight:600; color:#475569;"><span>PDB,S7TK PDB BD ASSY</span><span>1</span></div><div style="width:100%; background:#f1f5f9; border-radius:4px; height:12px;"><div style="width:50.0%; background:#dc2626; height:100%; border-radius:4px;"></div></div></div></div><h3 style="color: #1e3a5f; margin-bottom: 15px;">Detailed Breakdown by Component</h3><table style="width: 100%; border-collapse: collapse; font-size: 13px;"><tr style="background: #1e3a5f; color: white;"><th>Component Group</th><th>Top Failure Signatures (Aggregated)</th><th>Total Replacements</th></tr><tr style='border-bottom:1px solid #eee; background:white; vertical-align:top;'><td style='padding:12px; font-weight:600; color:#334155; width:25%;'>RAM,RAM(96G)DDR5-5600 R M321RYGA0PB0(X80)X4</td><td style='padding:12px;'><ul style="margin: 0; padding-left: 20px; color: #475569;"><li title="-> 2026-01-08 18:21:36,313 - INFO - [RESULT] <10> GPU, TT UBB FUNC FLASH FW [tt_ft_ubb_flash_fw] - 0 min 53.587 sec - FAIL">-> 2026-01-08 18:21:36,313 - INFO - [RESULT] <10> GPU, TT UBB FUNC FLASH FW [tt_ft_ubb_flash_fw] - 0 min 53.587 sec - FA... <strong>(x1)</strong></li><li title="ERROR - [FLASH_FIRMWARE_PACKAGE][FAIL@] Exec script:/test/s7tk/tools/arc/asic/tt-funtest-scripts/bh/funtest_bh/funtest_bh --board-type GALAXY --single-test flash_firmware_package --test-level system --force 1 --reset-galaxy-board-id --fwbundle-path /test/s7tk/firmware/arc/asic/bh/fw_pack-19.4.2.fwbundle unsuccessful! (timeout:120)
-> 2026-01-08 11:28:15,183 - INFO - [RESULT] <10> GPU, TT UBB FUNC FLASH FW [tt_ft_ubb_flash_fw] - 0 min 13.800 sec - FAIL">ERROR - [FLASH_FIRMWARE_PACKAGE][FAIL@] Exec script:/test/s7tk/tools/arc/asic/tt-funtest-scripts/bh/funtest_bh/funtest_b... <strong>(x1)</strong></li></ul></td><td style='text-align:center; padding:12px; font-weight:bold; color:#dc2626; font-size:14px; width:15%;'>2</td></tr><tr style='border-bottom:1px solid #eee; background:white; vertical-align:top;'><td style='padding:12px; font-weight:600; color:#334155; width:25%;'>FAN,S7G FAN</td><td style='padding:12px;'><ul style="margin: 0; padding-left: 20px; color: #475569;"><li title="-> 2026-01-09 17:13:05,579 - INFO - [RESULT] <33> STORAGE, ARC STORAGE USB FIO READ TEST [arc_storage_usb_fio_read_test] - 0 min 10.405 sec - FAIL">-> 2026-01-09 17:13:05,579 - INFO - [RESULT] <33> STORAGE, ARC STORAGE USB FIO READ TEST [arc_storage_usb_fio_read_test]... <strong>(x1)</strong></li></ul></td><td style='text-align:center; padding:12px; font-weight:bold; color:#dc2626; font-size:14px; width:15%;'>1</td></tr><tr style='border-bottom:1px solid #eee; background:white; vertical-align:top;'><td style='padding:12px; font-weight:600; color:#334155; width:25%;'>PANEL,S7T PANEL BD ASSY</td><td style='padding:12px;'><ul style="margin: 0; padding-left: 20px; color: #475569;"><li title="-> 2026-01-09 17:13:05,579 - INFO - [RESULT] <33> STORAGE, ARC STORAGE USB FIO READ TEST [arc_storage_usb_fio_read_test] - 0 min 10.405 sec - FAIL">-> 2026-01-09 17:13:05,579 - INFO - [RESULT] <33> STORAGE, ARC STORAGE USB FIO READ TEST [arc_storage_usb_fio_read_test]... <strong>(x1)</strong></li></ul></td><td style='text-align:center; padding:12px; font-weight:bold; color:#dc2626; font-size:14px; width:15%;'>1</td></tr><tr style='border-bottom:1px solid #eee; background:white; vertical-align:top;'><td style='padding:12px; font-weight:600; color:#334155; width:25%;'>PDB,S7TK PDB BD ASSY</td><td style='padding:12px;'><ul style="margin: 0; padding-left: 20px; color: #475569;"><li title="-> 2026-01-09 17:13:05,579 - INFO - [RESULT] <33> STORAGE, ARC STORAGE USB FIO READ TEST [arc_storage_usb_fio_read_test] - 0 min 10.405 sec - FAIL">-> 2026-01-09 17:13:05,579 - INFO - [RESULT] <33> STORAGE, ARC STORAGE USB FIO READ TEST [arc_storage_usb_fio_read_test]... <strong>(x1)</strong></li></ul></td><td style='text-align:center; padding:12px; font-weight:bold; color:#dc2626; font-size:14px; width:15%;'>1</td></tr></table>
        </div>

        <div id="detailed" class="view">
            <h2>Event Details</h2>
            <div style="margin-bottom: 19px;"><label>System</label><select id="system-selector" onchange="renderDetailedTimeline(this.value)" style="padding: 7px;"><option value="D2K-76">D2K-76</option>
<option value="D2K-77">D2K-77</option></select></div>
            <div id="detailed-content" class="detailed-table-wrapper"></div>
        </div>
        
        <div id="stats" class="view">
            <h2>Performance Summary</h2>
            <p style="margin-bottom:15px; font-size:14px; color:#64748b;"><strong>Avg Test Runtime:</strong> Only actual testing events.<br><strong>Gross Floor Time:</strong> Start to Finish duration, filtered by shift hours (08:00-20:00).</p>
            <table style="width: 100%; border-collapse: collapse; font-size: 14px;"><tr style="background: #1e3a5f; color: white;"><th style="padding: 11px; border: 1px solid #e2e8f0; font-weight: 600;">System</th><th style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight: 600;">Status</th><th style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight: 600;">Total Duration (Wall)</th><th style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight: 600; background:#f0f9ff; color:#0369a1;">Avg Test Runtime<br><span style="font-size:11px;font-weight:400">(No Gaps)</span></th><th style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight: 600; background:#f8fafc; color:#475569;">Gross Floor Time<br><span style="font-size:11px;font-weight:400">(Incl. Gaps in Shift)</span></th></tr><tr style="background: #f8fafc;"><td style="padding: 11px; border: 1px solid #e2e8f0; font-weight: 600;">D2K-76</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color: #f59e0b; font-weight: 600;">Wip</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center;">97h 39m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight:700; color:#0284c7; background:#f0f9ff;">2h 5m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color:#475569;">25h 39m</td></tr><tr style="background: #f8fafc;"><td style="padding: 11px; border: 1px solid #e2e8f0; font-weight: 600;">D2K-77</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color: #f59e0b; font-weight: 600;">Wip</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center;">8h 12m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; font-weight:700; color:#0284c7; background:#f0f9ff;">0h 19m</td><td style="padding: 11px; border: 1px solid #e2e8f0; text-align: center; color:#475569;">8h 12m</td></tr></table>
        </div>
    </div>

    <div id="infoModal" class="modal-overlay">
        <div class="modal-box">
            <span class="modal-close" onclick="closeInfoModal()">&times;</span>
            <div class="modal-header" id="infoModalHeader">Title</div>
            <div id="infoModalContent"></div>
        </div>
    </div>
    
    <div id="listModal" class="modal-overlay">
        <div class="modal-box">
            <span class="modal-close" onclick="closeListModal()">&times;</span>
            <div class="modal-header" id="listModalHeader">System List</div>
            <div class="modal-section">
                <div class="modal-content" id="listModalContent" style="background: white; border: none; padding: 0;"></div>
            </div>
        </div>
    </div>

    <script>
        const timelineData = {"D2K-76": [{"event": "PRETEST", "duration_min": 3, "working_min": 3, "idle_min": 0, "start_time": "2026-01-08 14:34:05", "failures": "", "replacements": "Added: RAM,RAM(96G)DDR5-5600 R M321RYGA0PB0(X80)X4\nMISSING -> 525F4464, 525F46DF, 525F4D38, 525F4D39, 525F4D3A, 525F4D5C", "result": "PASS"}, {"event": "FAT", "duration_min": 2, "working_min": 2, "idle_min": 15, "start_time": "2026-01-08 14:52:54", "failures": "-> 2026-01-08 14:54:52,914 - INFO - [RESULT] <18> PCIE, ARC PCIEUBB  DEVICE CHECK [arc_pcie_ubb_device_check] - 0 min 0.120 sec - FAIL", "replacements": "Replaced: FAN,S7G FAN\nSOL26MF5FA002045C2A01D6 -> SOL26MF5FA002045C2A012X", "result": "FAIL"}, {"event": "PRETEST", "duration_min": 4, "working_min": 4, "idle_min": 92, "start_time": "2026-01-08 16:27:25", "failures": "", "replacements": "", "result": "PASS"}, {"event": "PRETEST", "duration_min": 6, "working_min": 6, "idle_min": 33, "start_time": "2026-01-08 17:05:03", "failures": "", "replacements": "", "result": "PASS"}, {"event": "FAT", "duration_min": 6, "working_min": 6, "idle_min": 15, "start_time": "2026-01-08 17:26:39", "failures": "-> 2026-01-08 17:32:36,544 - INFO - [RESULT] <33> STORAGE, ARC STORAGE USB FIO READ TEST [arc_storage_usb_fio_read_test] - 0 min 10.377 sec - FAIL", "replacements": "Replaced: PANEL,S7T PANEL BD ASSY\nS7TYBB1C251001079 -> S7TYBB1C251001008", "result": "FAIL"}, {"event": "PRETEST", "duration_min": 5, "working_min": 5, "idle_min": 903, "start_time": "2026-01-09 08:35:39", "failures": "", "replacements": "", "result": "PASS"}, {"event": "FAT", "duration_min": 6, "working_min": 6, "idle_min": 15, "start_time": "2026-01-09 08:56:23", "failures": "-> 2026-01-09 09:02:16,202 - INFO - [RESULT] <33> STORAGE, ARC STORAGE USB FIO READ TEST [arc_storage_usb_fio_read_test] - 0 min 10.364 sec - FAIL\n2026-01-09 09:02:46,071 - ERROR - [ARC_UUT_SYSLOG_CLEAR][FAIL@] Syslog clear NOT Pass!", "replacements": "Replaced: PDB,S7TK PDB BD ASSY\nS7TKPBAB1K251023038 -> S7TKPBAB1K251023042", "result": "FAIL"}, {"event": "PRETEST", "duration_min": 6, "working_min": 6, "idle_min": 463, "start_time": "2026-01-09 16:46:06", "failures": "", "replacements": "", "result": "PASS"}, {"event": "FAT", "duration_min": 6, "working_min": 6, "idle_min": 15, "start_time": "2026-01-09 17:07:14", "failures": "-> 2026-01-09 17:13:05,579 - INFO - [RESULT] <33> STORAGE, ARC STORAGE USB FIO READ TEST [arc_storage_usb_fio_read_test] - 0 min 10.405 sec - FAIL", "replacements": "", "result": "FAIL"}, {"event": "FAT", "duration_min": 20, "working_min": 20, "idle_min": 3928, "start_time": "2026-01-12 10:41:53", "failures": "", "replacements": "", "result": "PASS"}, {"event": "FRO", "duration_min": 15, "working_min": 15, "idle_min": 53, "start_time": "2026-01-12 11:54:55", "failures": "-> 2026-01-12 12:10:08,027 - INFO - [RESULT] <1> GPU, TT UBB FUNC BURNIN TEST [tt_ft_ubb_test_burnin] - 14 min 40.458 sec - FAIL", "replacements": "", "result": "FAIL"}, {"event": "FRO", "duration_min": 46, "working_min": 46, "idle_min": 197, "start_time": "2026-01-12 15:27:29", "failures": "", "replacements": "", "result": "PASS"}], "D2K-77": [{"event": "PRETEST", "duration_min": 11, "working_min": 11, "idle_min": 0, "start_time": "2026-01-08 10:09:27", "failures": "2026-01-08 10:20:33,558 - ERROR - [ARC_BMC_PDB_REDRIVER_FW_UPDATE][FAIL@] Uploading PDB_REDRIVER fail!\n2026-01-08 10:20:33,562 - ERROR - [ARC_BMC_PDB_REDRIVER_FW_UPDATE][FAIL@] Uploading PDB_REDRIVER fail!\n2026-01-08 10:20:33,566 - ERROR - [ARC_BMC_PDB_REDRIVER_FW_UPDATE][FAIL@] Uploading PDB_REDRIVER fail!\n2026-01-08 10:20:33,570 - ERROR - [ARC_BMC_PDB_REDRIVER_FW_UPDATE][FAIL@] Uploading PDB_REDRIVER fail!\n2026-01-08 10:20:33,574 - ERROR - [ARC_BMC_PDB_REDRIVER_FW_UPDATE][FAIL@] The PDB_REDRIVER firmware update Not Pass!\n-> 2026-01-08 10:20:33,575 - INFO - [RESULT] <7> BMC, ARC PDB REDRIVER FIRMWARE UPDATE [arc_bmc_pdb_redriver_fw_update] - 0 min 0.776 sec - FAIL", "replacements": "", "result": "FAIL"}, {"event": "PRETEST", "duration_min": 4, "working_min": 4, "idle_min": 148, "start_time": "2026-01-08 12:49:25", "failures": "", "replacements": "Added: RAM,RAM(96G)DDR5-5600 R M321RYGA0PB0(X80)X4\nMISSING -> 525F4462, 525F450A, 525F450F, 525F4510, 525F48F6, 525F4C6B", "result": "PASS"}, {"event": "FAT", "duration_min": 2, "working_min": 2, "idle_min": 15, "start_time": "2026-01-08 13:08:41", "failures": "2026-01-08 13:10:23,473 - ERROR - [ARC_BMC_CPLD_CHECK][UBB1][FAIL@] <UBB1> : ASIC3_alive\n-> 2026-01-08 13:10:23,474 - INFO - [RESULT] <1> BMC, ARC BMC CPLD CHECK [arc_bmc_cpld_check] - 1 min 14.477 sec - FAIL", "replacements": "", "result": "FAIL"}, {"event": "PRETEST", "duration_min": 2, "working_min": 2, "idle_min": 309, "start_time": "2026-01-08 18:20:12", "failures": "-> 2026-01-08 18:21:36,313 - INFO - [RESULT] <10> GPU, TT UBB FUNC FLASH FW [tt_ft_ubb_flash_fw] - 0 min 53.587 sec - FAIL", "replacements": "", "result": "FAIL"}]};
        const categoryLists = {"first_pass": [], "pass": [], "wip": ["D2K-76", "D2K-77"], "unknown": []};
        const systems = Object.keys(timelineData).sort();
        const grossExampleHtml = decodeBase64("Tm8gZGF0YSBhdmFpbGFibGUu");
        const fpyListHtml = decodeBase64("Tm8gRmlyc3QtUGFzcyBzeXN0ZW1zIGZvdW5kLg==");
        
        // KPI Definitions for Modal
        const kpiDefinitions = {
            'throughput': {
                title: 'Throughput (Weekly)',
                content: `
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Calculation</div>
                        (Completed Units / Total Days in Dataset) * 7
                    </div>
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Logic</div>
                        Estimates your weekly production capacity based on the timespan of the logs you uploaded. Only counts systems with a final "PASS" (First-Pass or Recovered).
                    </div>`
            },
            'fpy_runtime': {
                title: 'Avg Assembly Runtime (FPY)',
                content: `
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Calculation</div>
                        Average Assembly Runtime within working hours for First-Pass units.
                    </div>
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">System Breakdown (Sorted by Time)</div>
                        ` + fpyListHtml + `
                    </div>`
            },
            'downtime': {
                title: 'Avg Downtime per Failure',
                content: `
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Calculation</div>
                        Sum(Gap Duration immediately following a FAIL event) / Total Failure Count
                    </div>
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Logic</div>
                        Measures the average "dead time" (gap) that occurs right after a test fails. This indicates how long the unit typically sits idle waiting for debug or a retry after a failure.
                    </div>`
            },
            'net': {
                title: 'Avg Test Runtime',
                content: `
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Calculation</div>
                        Sum of all active test event durations.
                    </div>
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Example</div>
                        - Test A: 10 mins<br>
                        - (Idle Gap: 5 hours)<br>
                        - Test B: 10 mins<br>
                        = <strong>20 mins Net Active Time</strong>
                    </div>`
            },
            'gross': {
                title: 'Avg Assembly Runtime (APY)',
                content: `
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Calculation</div>
                        Total duration falling within shift hours (8:00 - 20:00).
                    </div>
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Logic</div>
                        Average runtime for <strong>ALL</strong> completed units (both First-Pass and Recovered), filtered by shift hours.
                    </div>
                    <div class="kpi-def-block">
                        <div class="kpi-def-title">Real Data Example</div>
                        ` + grossExampleHtml + `
                    </div>`
            }
        };

        function decodeBase64(str) {
            try { return decodeURIComponent(atob(str).split('').map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join('')); }
            catch(e) { return str; }
        }

        function switchTab(tabName, btn) {
            document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.btn').forEach(el => el.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            btn.classList.add('active');
            if (tabName === 'detailed' && systems.length > 0) { renderDetailedTimeline(document.getElementById('system-selector').value || systems[0]); }
        }

        function showKpiInfo(type) {
            const def = kpiDefinitions[type];
            if(def) {
                document.getElementById('infoModalHeader').textContent = def.title;
                document.getElementById('infoModalContent').innerHTML = def.content;
                document.getElementById('infoModal').classList.add('active');
            }
        }
        function closeInfoModal() { document.getElementById('infoModal').classList.remove('active'); }
        document.getElementById('infoModal').addEventListener('click', function(e) { if (e.target === this) closeInfoModal(); });

        function showFailureDetail(eventName, failuresB64, replB64) {
            document.getElementById('infoModalHeader').textContent = 'Event Details: ' + eventName;
            const fail = decodeBase64(failuresB64) || '(No failures)';
            const repl = decodeBase64(replB64) || '(No replacements)';
            const content = '<div class="modal-section"><div class="modal-label">Failures</div><div class="modal-content">' + fail + '</div></div>' +
                            '<div class="modal-section"><div class="modal-label" style="color:#d97706">Replacements</div><div class="modal-content" style="background:#fffbeb; color:#92400e;">' + repl + '</div></div>';
            document.getElementById('infoModalContent').innerHTML = content;
            document.getElementById('infoModal').classList.add('active');
        }
        
        function showSystemList(title, listKey) {
            document.getElementById('listModalHeader').textContent = title;
            const list = categoryLists[listKey] || [];
            if (list.length === 0) {
                document.getElementById('listModalContent').innerHTML = '<p style="color:#666; font-style:italic;">No systems in this category.</p>';
            } else {
                let html = '<ul style="list-style: none; padding: 0;">';
                list.forEach(sys => {
                    html += '<li style="padding: 8px 12px; border-bottom: 1px solid #eee; display:flex; justify-content:space-between; align-items:center;">' + 
                            '<span style="font-weight:500;">' + sys + '</span>' +
                            '<button onclick="jumpToSystem(\'' + sys + '\')" style="padding:4px 8px; font-size:12px; border:1px solid #ccc; background:#fff; border-radius:4px; cursor:pointer;">View</button>' +
                            '</li>';
                });
                html += '</ul>';
                document.getElementById('listModalContent').innerHTML = html;
            }
            document.getElementById('listModal').classList.add('active');
        }
        function closeListModal() { document.getElementById('listModal').classList.remove('active'); }
        document.getElementById('listModal').addEventListener('click', function(e) { if (e.target === this) closeListModal(); });

        function jumpToSystem(sysName) {
            closeListModal();
            switchTab('timeline', document.querySelector('.controls .btn:first-child'));
            const el = document.querySelector('.sys[data-system="' + sysName + '"]');
            if (el) {
                el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                el.style.border = '2px solid #0066cc';
                setTimeout(() => { el.style.border = '1px solid #e2e8f0'; }, 2000);
            }
        }

        document.addEventListener('keydown', function(e) { 
            if (e.key === 'Escape') { closeInfoModal(); closeListModal(); }
        });

        function renderDetailedTimeline(systemName) {
            const events = timelineData[systemName];
            if (!events) return;
            let html = '<table style="width: 100%; border-collapse: collapse; font-size: 14px;"><tr style="background: #1e3a5f; color: white;"><th style="padding: 11px;">Event</th><th style="padding: 11px;">Duration</th><th style="padding: 11px;">Net Active Time</th><th style="padding: 11px;">Failures</th><th style="padding: 11px;">Replacements</th></tr>';
            events.forEach(evt => {
                const dur = evt.duration_min + 'm';
                const work = (evt.working_min || 0) + 'm';
                html += '<tr style="background: #f8fafc;"><td style="padding: 11px; border: 1px solid #e2e8f0;">'+evt.event+'</td><td style="padding: 11px; border: 1px solid #e2e8f0;">'+dur+'</td><td style="padding: 11px; border: 1px solid #e2e8f0; color:#0284c7; font-weight:600;">'+work+'</td><td style="padding: 11px; border: 1px solid #e2e8f0;">'+(evt.failures||'-')+'</td><td style="padding: 11px; border: 1px solid #e2e8f0; color:#d97706; font-weight:500;">'+(evt.replacements||'-')+'</td></tr>';
            });
            html += '</table>';
            document.getElementById('detailed-content').innerHTML = html;
        }
        
        if (systems.length > 0) { document.getElementById('system-selector').value = systems[0]; }
    </script>
</body>
</html>