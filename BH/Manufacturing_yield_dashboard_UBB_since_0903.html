<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manufacturing Yield Dashboard V1.3</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e2a3a 0%, #2d3e50 100%);
            color: #e8e8e8; padding: 15px; min-height: 100vh;
        }
        .container { max-width: 1900px; margin: 0 auto; }
        h1 { text-align: center; color: #4fc3f7; margin-bottom: 20px; font-size: 2em; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .row { display: flex; gap: 15px; margin-bottom: 15px; }
        .section { background: rgba(44, 62, 80, 0.9); border-radius: 10px; padding: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); margin-bottom: 15px; }
        .half { flex: 1; min-width: 0; }
        .section-title { color: #4fc3f7; font-size: 1.4em; margin-bottom: 12px; border-bottom: 2px solid #4fc3f7; padding-bottom: 6px; }
        .controls { display: flex; gap: 15px; margin-bottom: 12px; flex-wrap: wrap; }
        .control-group { flex: 1; min-width: 180px; }
        label { display: block; color: #b0c4de; margin-bottom: 6px; font-weight: 500; font-size: 0.9em; }
        select, button { width: 100%; padding: 8px; background: #34495e; color: #e8e8e8; border: 1px solid #4fc3f7; border-radius: 5px; font-size: 13px; cursor: pointer; transition: all 0.3s; }
        select:hover, button:hover { background: #3d566e; border-color: #81d4fa; }
        select:focus { outline: none; border-color: #29b6f6; box-shadow: 0 0 8px rgba(79, 195, 247, 0.3); }
        .chart-container { background: #2c3e50; border-radius: 8px; padding: 12px; margin-top: 10px; height: 280px; }
        canvas { max-width: 100%; max-height: 260px !important; }
        .heatmap-container { overflow-x: auto; margin-top: 10px; max-height: 400px; }
        .heatmap-table { width: 100%; border-collapse: collapse; background: #2c3e50; border-radius: 8px; overflow: hidden; font-size: 12px; }
        .heatmap-table th, .heatmap-table td { padding: 8px; text-align: center; border: 1px solid #34495e; }
        .heatmap-table th { background: #1a252f; color: #4fc3f7; font-weight: 600; position: sticky; top: 0; }
        .heatmap-table td { color: #e8e8e8; transition: all 0.2s; }
        .heatmap-table td:hover { transform: scale(1.05); z-index: 10; box-shadow: 0 0 12px rgba(79, 195, 247, 0.5); }
        .heatmap-cell { font-weight: bold; }
        .summary-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 13px; }
        .summary-table th, .summary-table td { padding: 8px; text-align: left; border-bottom: 1px solid #34495e; }
        .summary-table th { background: #1a252f; color: #4fc3f7; font-weight: 600; }
        .summary-table tr:hover { background: #34495e; }
        .no-data { text-align: center; color: #7f8c8d; padding: 30px; font-style: italic; font-size: 0.95em; }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }
        .stat-card {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            border: 1px solid #4fc3f7;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(79, 195, 247, 0.3);
        }
        .stat-label {
            color: #b0c4de;
            font-size: 0.85em;
            font-weight: 500;
            margin-bottom: 6px;
        }
        .stat-value {
            color: #4fc3f7;
            font-size: 1.6em;
            font-weight: bold;
        }
        @media (max-width: 1200px) { .row { flex-direction: column; } .half { width: 100%; } }
        @media (max-width: 768px) { h1 { font-size: 1.6em; } .controls { flex-direction: column; } .control-group { min-width: 100%; } .chart-container { height: 200px; } }
    
        .x-axis-label-custom { text-align: center; color: #4fc3f7; font-size: 14px; font-weight: bold; margin-top: 10px; padding: 8px; }
        .help-icon { display: inline-flex; margin-left: 12px; cursor: pointer; }
        .help-icon-circle { width: 28px; height: 28px; border-radius: 50%; background: linear-gradient(135deg, #4fc3f7, #039be5); color: #fff; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: bold; transition: all .3s; box-shadow: 0 2px 8px rgba(79,195,247,.4); }
        .help-icon:hover .help-icon-circle { background: linear-gradient(135deg, #81d4fa, #4fc3f7); transform: scale(1.15); box-shadow: 0 4px 12px rgba(79,195,247,.6); }
        th[title] { cursor: help; }
        th[title]:hover { background-color: rgba(79,195,247,.1); }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,.7); }
        .modal-content { background-color: #2d3748; margin: 2% auto; padding: 30px; border-radius: 12px; width: 80%; max-width: 900px; max-height: 85vh; overflow-y: auto; color: #e8e8e8; box-shadow: 0 10px 40px rgba(0,0,0,.5); }
        .modal-content h3 { color: #4fc3f7; margin-top: 20px; }
        .close-button { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        .close-button:hover { color: #4fc3f7; }
    </style>
</head>
<body>
    <div class="container">
        <h1>BH UBB Builds</h1>
        <div class="subtitle" style="text-align: center; color: #64748b; font-size: 1.1em; margin-top: -10px; margin-bottom: 20px;">ðŸ“Š Manufacturing Yield Dashboard </div>

        <!-- Overall Statistics -->
        <div class="section">
            <h2 class="section-title">Overall Statistics (All Builds)</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Total Units</div>
                    <div class="stat-value" id="statTotalUnits">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Passed (FPY)</div>
                    <div class="stat-value" id="statPassed">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Fixed</div>
                    <div class="stat-value" id="statFixed">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Failed</div>
                    <div class="stat-value" id="statFailed">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Overall FPY</div>
                    <div class="stat-value" id="statFPY">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Overall APY</div>
                    <div class="stat-value" id="statAPY">-</div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="section half">
                <h2 class="section-title">APY & FPY Trends</h2>

                <div class="chart-container"><canvas id="yieldChart"></canvas></div>
                <div class="x-axis-label-custom">Build Date</div>
            </div>
            <div class="section half">
                <h2 class="section-title">Jira Trend Analysis</h2>

                <!-- Toggle Buttons -->
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <button id="btnAPY" onclick="switchTrendView('APY')" 
                            style="flex: 1; padding: 10px 15px; border: none; border-radius: 6px; cursor: pointer; 
                                   font-size: 14px; font-weight: 600; transition: all 0.3s;
                                   background: linear-gradient(135deg, #4fc3f7 0%, #039be5 100%); 
                                   color: white; box-shadow: 0 2px 8px rgba(79, 195, 247, 0.3);">
                        ðŸ“Š APY Units
                    </button>
                    <button id="btnFPY" onclick="switchTrendView('FPY')"
                            style="flex: 1; padding: 10px 15px; border: none; border-radius: 6px; cursor: pointer;
                                   font-size: 14px; font-weight: 600; transition: all 0.3s;
                                   background: rgba(79, 195, 247, 0.15); color: #4fc3f7; 
                                   border: 2px solid rgba(79, 195, 247, 0.5);">
                        ðŸ“ˆ FPY Units
                    </button>
                </div>

                <!-- APY Section -->
                <div id="apySection" style="display: block;">
                    <div class="controls">
                        <div class="control-group">
                            <label for="jiraTrendSelectAPY"><div style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
            <label style="color: #4fc3f7; font-weight: bold; font-size: 12px;">Y-Axis Display:</label>
            <button id="togglePercentUnits" style="padding: 4px 10px; width: 80px; text-align: center; background-color: #4fc3f7; color: #1a1f36; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 11px; transition: all 0.3s;">%</button>
        </div>

        Select Jira Entries (Cmd/Ctrl + Click):</label>
                            <select id="jiraTrendSelectAPY" multiple size="4"></select>
                        </div>
                    </div>
                    <div class="chart-container"><canvas id="jiraTrendChartAPY"></canvas></div>
                </div>

                <!-- FPY Section -->
                <div id="fpySection" style="display: none;">
                    <div class="controls">
                        <div class="control-group">
                            <div style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
                            <label style="color: #4fc3f7; font-weight: bold; font-size: 12px;">Y-Axis Display:</label>
                            <button id="togglePercentUnitsFPY" style="padding: 4px 10px; width: 80px; text-align: center; background-color: #4fc3f7; color: #1a1f36; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 11px; transition: all 0.3s;">%</button>
                        </div>
                        <label for="jiraTrendSelectFPY">Select Jira Entries (Cmd/Ctrl + Click):</label>
                            <select id="jiraTrendSelectFPY" multiple size="4"></select>
                        </div>
                    </div>
                    <div class="chart-container"><canvas id="jiraTrendChartFPY"></canvas></div>
                </div>
            </div>
            </div>
        </div>
        <div class="row">
            <div class="section half">
                <h2 class="section-title">Component Failure Heatmaps<span class="help-icon" onclick="showHeatmapGuide()" title="Click for detailed guide"><div class="help-icon-circle">?</div></span></h2>
                <div class="controls">
                    <div class="control-group">
                        <label for="heatmapJiraSelect">Jira Entry:</label>
                        <select id="heatmapJiraSelect"></select>
                    </div>
                    <div class="control-group">
                        <label for="heatmapTypeSelect">Heatmap Type:</label>
                        <select id="heatmapTypeSelect"></select>
                    </div>
                </div>
                <div id="heatmapDisplay" class="heatmap-container"></div>
            </div>
            <div class="section half">
                <h2 class="section-title">Jira Summary Statistics</h2>
                <div style="overflow-x: auto; max-height: 450px; overflow-y: auto;">
                    <table class="summary-table" id="summaryTable"></table>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <script>
        const overallStats = {"totalUnits": 403, "passed": 324, "fixed": 31, "failed": 48, "overallAPY": 88.09, "overallFPY": 80.4};
            const jiraMapping = {"QUAN-488": "Eth training failures OVER 40% tolerance", "WAIVED - QUAN-371": "Eth training failures UNDER 40% tolerance", "QUAN-371": "Eth training failures UNDER 40% tolerance", "QUAN-487": "PCIe downgrade issue detected during BHFT and pre-test", "Need Jira": "DDR test failure at all controllers", "WAIVED - QUAN-518": "Eth test failure - E33 TIMEOUT", "QUAN-518": "Eth test failure - E33 TIMEOUT", "QUAN-370": "AISC lost issue", "QUAN-519": "DDR Training EC failure at 14G", "DONE - QUAN-363": "ASIC EFUSE FAIL", "QUAN-363": "ASIC EFUSE FAIL", "DONE - QUAN-367": "PCIE DMA failure - E18", "QUAN-367": "PCIE DMA failure - E18", "DONE - QUAN-368": "noc_access_check failure - E21", "QUAN-368": "noc_access_check failure - E21", "DONE - QUAN-369": "multi_core_tensix_test failure - E33", "QUAN-369": "multi_core_tensix_test failure - E33", "DONE - QUAN-365": "Chip Initialization Fail - EL", "QUAN-365": "Chip Initialization Fail - EL", "QUAN-524": "ASIC initialization failed - EFRDY", "QUAN-366": "DDR Training ET failure at 14G", "QUAN-503": "p300x ft_ddr_stress with error: DDR_TRAIN_FAIL", "QUAN-237": "ASIC PCIe link downgrade detected", "QUAN-177": "BER issues", "QUAN-176": "DRAM EC# error failed at 14G speed.", "QUAN-211": "DRAM 14G/12G Fail", "QUAN-204": "DUMMY PACKET issues", "QUAN-401": "DDR Training failure - ET", "QUAN-210": "DRAM training failure - EM", "Need Jira - PCIe DMA": "PCIE DMA failure - E18", "QUAN-284": "FT_BURNIN - tmon_max exceeds the threshold", "QUAN-178": "ETH failure on long trace on multiple systems", "QUAN-179": "link error TIMEOUT_AN_ATTEMPTS observed in ETH idle test", "QUAN-238": "ETH_STREAM_APP_FAIL - timed out data", "Need Jira - Uncorrected codewords": "ETH_STREAM_APP_FAIL - Uncorrected codewords", "QUAN-436": "ETH stream failure - completed but data error", "QUAN-235": "TIMEOUT_PG_RCV issues were observed during the ETH idle test", "NTF - Eth": "Training Failed ETH", "QUAN-545": "Detect temperature over limitation - hard Failure", "QUAN-537": "Detect temperature over limitation - repass", "QUAN-504": "PCIe Enumeration Failure", "NTF - EFRDY": "Error code shows FW is not ready", "QUAN-459": "Chip Initialization Failure", "QUAN-218": "EFUSE failure in BHFT PART1", "NTF - EC": "DDR test failure at some controllers", "NTF - ECX": "DDR test failure at all controllers", "Need Jira for U507 failure during I2C test": "Component U507 failed during I2C UBB TEST", "Need Jira for TMP75 failure during I2C Test": "Multiple TMP75 components failure during VR I2C TEST", "QUAN-265": "RT SPI Firmware Failure", "Need Jira for JUMPER_FORCE_POWER_ON_N": "Observed JUMPER_FORCE_POWER_ON_N during CPLD check", "DONE - QUAN-373": "PWRGR and FPGA VR components failures", "QUAN-373": "PWRGR and FPGA VR components failures", "Need Jira for ASIC alive with PWRGD": "ASIC VR I2C failure with PWRGD_VR_ASIC#", "QUAN-439": "ft_burnin test failed with error: HIGH_TEMPERATUE", "QUAN-146": "PCIe PCIe speed/width check ailure", "QUAN-546": "PCIe PCIe speed/width check hard failure", "NTF - QUAN-149": "p150x cards ethernet_loopback_test failed", "QUAN-149": "p150x cards ethernet_loopback_test failed", "QUAN-473": "DDR training failure(ET, EFRDY) on P150a and P150b", "DONE - QUAN-145": "p150b card check_pcie_dma failed", "QUAN-145": "p150b card check_pcie_dma failed", "NTF - EL": "Chip Initialization Failure", "WAD-1": "Missing OCP in the system", "WAD-2": "Missing OCP in the system", "WAD-3": "Missing OCP in the system", "WAD-4": "Missing OCP in the system", "Need Jira for FW upload timed out": "FW upload timeout during ARC_BMC_CPLD_UBB_FW_UPDATE", "Waived - Connection Problem": "#J203 QSFP-DD error during ARC_BMC_I2C_UBB_TEST", "QUAN-240": "ASIC PCIe enumeration failure.", "QUAN-285": "Thermal triip during burnin test.", "Need Jira - Sensor reading": "Sensors has no readings for ASIC TEMP and Power", "Need Jira - QSFP LED": " QSFP GREEN LEDs are ON which is unexpected.", "Need Jira - EFCMT": "EFCMT error code in TT_FIRMWARE test stage", "QUAN-570": "EC error dueing DRAM testing stage", "QUAN-651": "Unable to send RAW command to PHY# address", "Need Jira for CPU low performance.": "During CPU Performance check, it showed \"The result of current cpu performance (0.0) < Expected lower limit (6.0)\"", "Need Jira for FRB2 Hang during POST": "ASIC#_Stat: FRB2/Hang in POST failure. ", "QUAN-88": "The issue is caused by ALB not seated properly. Can be recovered by reseat", "Need Jira for E33 CRC error": "E33 CRC error observed during ETH_STREAM_APP_FAIL. ", "Need Jira for Front Panel Test Failed": "I2C - FP test Not Pass!", "Done for OCP Cable Connect Issue": "Client command execution error. Error: Failed to modify QP 6145 to RTR", "Need Jira for missing sensors": "Missing Fan and PDB sensors during ARC_BMC_SDR_PRESENT_CHECK", "Waived - Missing OCP in the system": "Missing OCP in the system", "Waived - CPLD Flash timeout": "FW Type: CPLD_UBB, Timeout: 180", "QUAN-611": "System failed to boot when the specific UBB is installed in the system"};
        const jiraUrls = {"QUAN-488": "https://ext-tenstorrent.atlassian.net/browse/QUAN-488", "WAIVED - QUAN-371": "https://ext-tenstorrent.atlassian.net/browse/QUAN-371", "QUAN-371": "https://ext-tenstorrent.atlassian.net/browse/QUAN-371", "QUAN-487": "https://ext-tenstorrent.atlassian.net/browse/QUAN-487", "WAIVED - QUAN-518": "https://ext-tenstorrent.atlassian.net/browse/QUAN-518", "QUAN-518": "https://ext-tenstorrent.atlassian.net/browse/QUAN-518", "QUAN-370": "https://ext-tenstorrent.atlassian.net/browse/QUAN-370", "QUAN-519": "https://ext-tenstorrent.atlassian.net/browse/QUAN-519", "DONE - QUAN-363": "https://ext-tenstorrent.atlassian.net/browse/QUAN-363", "QUAN-363": "https://ext-tenstorrent.atlassian.net/browse/QUAN-363", "DONE - QUAN-367": "https://ext-tenstorrent.atlassian.net/browse/QUAN-367", "QUAN-367": "https://ext-tenstorrent.atlassian.net/browse/QUAN-367", "DONE - QUAN-368": "https://ext-tenstorrent.atlassian.net/browse/QUAN-368", "QUAN-368": "https://ext-tenstorrent.atlassian.net/browse/QUAN-368", "DONE - QUAN-369": "https://ext-tenstorrent.atlassian.net/browse/QUAN-369", "QUAN-369": "https://ext-tenstorrent.atlassian.net/browse/QUAN-369", "DONE - QUAN-365": "https://ext-tenstorrent.atlassian.net/browse/QUAN-365", "QUAN-365": "https://ext-tenstorrent.atlassian.net/browse/QUAN-365", "QUAN-524": "https://ext-tenstorrent.atlassian.net/browse/QUAN-524", "QUAN-366": "https://ext-tenstorrent.atlassian.net/browse/QUAN-366", "QUAN-503": "https://ext-tenstorrent.atlassian.net/browse/QUAN-503", "QUAN-237": "https://ext-tenstorrent.atlassian.net/browse/QUAN-237", "QUAN-177": "https://ext-tenstorrent.atlassian.net/browse/QUAN-177", "QUAN-176": "https://ext-tenstorrent.atlassian.net/browse/QUAN-176", "QUAN-211": "https://ext-tenstorrent.atlassian.net/browse/QUAN-211", "QUAN-204": "https://ext-tenstorrent.atlassian.net/browse/QUAN-204", "QUAN-401": "https://ext-tenstorrent.atlassian.net/browse/QUAN-401", "QUAN-210": "https://ext-tenstorrent.atlassian.net/browse/QUAN-210", "QUAN-284": "https://ext-tenstorrent.atlassian.net/browse/QUAN-284", "QUAN-178": "https://ext-tenstorrent.atlassian.net/browse/QUAN-178", "QUAN-179": "https://ext-tenstorrent.atlassian.net/browse/QUAN-179", "QUAN-238": "https://ext-tenstorrent.atlassian.net/browse/QUAN-238", "QUAN-436": "https://ext-tenstorrent.atlassian.net/browse/QUAN-436", "QUAN-235": "https://ext-tenstorrent.atlassian.net/browse/QUAN-235", "QUAN-545": "https://ext-tenstorrent.atlassian.net/browse/QUAN-545", "QUAN-537": "https://ext-tenstorrent.atlassian.net/browse/QUAN-537", "QUAN-504": "https://ext-tenstorrent.atlassian.net/browse/QUAN-504", "QUAN-459": "https://ext-tenstorrent.atlassian.net/browse/QUAN-459", "QUAN-218": "https://ext-tenstorrent.atlassian.net/browse/QUAN-218", "QUAN-544": "https://ext-tenstorrent.atlassian.net/browse/QUAN-544", "QUAN-265": "https://ext-tenstorrent.atlassian.net/browse/QUAN-265", "DONE - QUAN-373": "https://ext-tenstorrent.atlassian.net/browse/QUAN-373", "QUAN-373": "https://ext-tenstorrent.atlassian.net/browse/QUAN-373", "QUAN-439": "https://ext-tenstorrent.atlassian.net/browse/QUAN-439", "QUAN-146": "https://ext-tenstorrent.atlassian.net/browse/QUAN-146", "QUAN-546": "https://ext-tenstorrent.atlassian.net/browse/QUAN-546", "NTF - QUAN-149": "https://ext-tenstorrent.atlassian.net/browse/QUAN-149", "QUAN-149": "https://ext-tenstorrent.atlassian.net/browse/QUAN-149", "QUAN-473": "https://ext-tenstorrent.atlassian.net/browse/QUAN-473", "DONE - QUAN-145": "https://ext-tenstorrent.atlassian.net/browse/QUAN-145", "QUAN-145": "https://ext-tenstorrent.atlassian.net/browse/QUAN-145", "QUAN-240": "https://ext-tenstorrent.atlassian.net/browse/QUAN-240", "QUAN-285": "https://ext-tenstorrent.atlassian.net/browse/QUAN-285", "QUAN-570": "https://ext-tenstorrent.atlassian.net/browse/QUAN-570", "QUAN-651": "https://ext-tenstorrent.atlassian.net/browse/QUAN-651", "QUAN-88": "https://ext-tenstorrent.atlassian.net/browse/QUAN-88", "QUAN-611": "https://ext-tenstorrent.atlassian.net/browse/QUAN-611"};
        const yieldData = [{"buildDate": "2025-09-03", "totalUnits": 57, "fpy": 68.42, "apy": 71.93, "passed": 39, "fixed": 2, "failed": 16}, {"buildDate": "2025-09-17", "totalUnits": 40, "fpy": 72.5, "apy": 85.0, "passed": 29, "fixed": 5, "failed": 6}, {"buildDate": "2025-09-24", "totalUnits": 40, "fpy": 80.0, "apy": 82.5, "passed": 32, "fixed": 1, "failed": 7}, {"buildDate": "2025-10-01", "totalUnits": 80, "fpy": 86.25, "apy": 97.5, "passed": 69, "fixed": 9, "failed": 2}, {"buildDate": "2025-10-15", "totalUnits": 98, "fpy": 82.65, "apy": 90.82, "passed": 81, "fixed": 8, "failed": 9}, {"buildDate": "2025-10-22", "totalUnits": 59, "fpy": 91.53, "apy": 91.53, "passed": 54, "fixed": 0, "failed": 5}, {"buildDate": "2025-12-10", "totalUnits": 29, "fpy": 68.97, "apy": 89.66, "passed": 20, "fixed": 6, "failed": 3}];
        const jiraTrendDataAPY = [{"buildDate": "2025-09-03", "jira": "Need Jira for ASIC alive with PWRGD", "count": 0}, {"buildDate": "2025-09-03", "jira": "Need Jira for FW upload timed out", "count": 0}, {"buildDate": "2025-09-03", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 0}, {"buildDate": "2025-09-03", "jira": "QUAN-366", "count": 1}, {"buildDate": "2025-09-03", "jira": "QUAN-370", "count": 4}, {"buildDate": "2025-09-03", "jira": "QUAN-371", "count": 54}, {"buildDate": "2025-09-03", "jira": "QUAN-487", "count": 11}, {"buildDate": "2025-09-03", "jira": "QUAN-488", "count": 1}, {"buildDate": "2025-09-03", "jira": "QUAN-518", "count": 0}, {"buildDate": "2025-09-03", "jira": "QUAN-519", "count": 0}, {"buildDate": "2025-09-03", "jira": "QUAN-524", "count": 0}, {"buildDate": "2025-09-03", "jira": "QUAN-611", "count": 0}, {"buildDate": "2025-09-03", "jira": "Waived - CPLD Flash timeout", "count": 0}, {"buildDate": "2025-09-03", "jira": "Waived - Connection Problem", "count": 0}, {"buildDate": "2025-09-03", "jira": "Waived - Missing OCP in the system", "count": 8}, {"buildDate": "2025-09-17", "jira": "Need Jira for ASIC alive with PWRGD", "count": 0}, {"buildDate": "2025-09-17", "jira": "Need Jira for FW upload timed out", "count": 0}, {"buildDate": "2025-09-17", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 0}, {"buildDate": "2025-09-17", "jira": "QUAN-366", "count": 0}, {"buildDate": "2025-09-17", "jira": "QUAN-370", "count": 1}, {"buildDate": "2025-09-17", "jira": "QUAN-371", "count": 29}, {"buildDate": "2025-09-17", "jira": "QUAN-487", "count": 2}, {"buildDate": "2025-09-17", "jira": "QUAN-488", "count": 2}, {"buildDate": "2025-09-17", "jira": "QUAN-518", "count": 1}, {"buildDate": "2025-09-17", "jira": "QUAN-519", "count": 1}, {"buildDate": "2025-09-17", "jira": "QUAN-524", "count": 0}, {"buildDate": "2025-09-17", "jira": "QUAN-611", "count": 0}, {"buildDate": "2025-09-17", "jira": "Waived - CPLD Flash timeout", "count": 0}, {"buildDate": "2025-09-17", "jira": "Waived - Connection Problem", "count": 0}, {"buildDate": "2025-09-17", "jira": "Waived - Missing OCP in the system", "count": 5}, {"buildDate": "2025-09-24", "jira": "Need Jira for ASIC alive with PWRGD", "count": 0}, {"buildDate": "2025-09-24", "jira": "Need Jira for FW upload timed out", "count": 0}, {"buildDate": "2025-09-24", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 1}, {"buildDate": "2025-09-24", "jira": "QUAN-366", "count": 1}, {"buildDate": "2025-09-24", "jira": "QUAN-370", "count": 0}, {"buildDate": "2025-09-24", "jira": "QUAN-371", "count": 1}, {"buildDate": "2025-09-24", "jira": "QUAN-487", "count": 1}, {"buildDate": "2025-09-24", "jira": "QUAN-488", "count": 2}, {"buildDate": "2025-09-24", "jira": "QUAN-518", "count": 0}, {"buildDate": "2025-09-24", "jira": "QUAN-519", "count": 3}, {"buildDate": "2025-09-24", "jira": "QUAN-524", "count": 0}, {"buildDate": "2025-09-24", "jira": "QUAN-611", "count": 0}, {"buildDate": "2025-09-24", "jira": "Waived - CPLD Flash timeout", "count": 0}, {"buildDate": "2025-09-24", "jira": "Waived - Connection Problem", "count": 0}, {"buildDate": "2025-09-24", "jira": "Waived - Missing OCP in the system", "count": 4}, {"buildDate": "2025-10-01", "jira": "Need Jira for ASIC alive with PWRGD", "count": 0}, {"buildDate": "2025-10-01", "jira": "Need Jira for FW upload timed out", "count": 0}, {"buildDate": "2025-10-01", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 0}, {"buildDate": "2025-10-01", "jira": "QUAN-366", "count": 1}, {"buildDate": "2025-10-01", "jira": "QUAN-370", "count": 1}, {"buildDate": "2025-10-01", "jira": "QUAN-371", "count": 4}, {"buildDate": "2025-10-01", "jira": "QUAN-487", "count": 0}, {"buildDate": "2025-10-01", "jira": "QUAN-488", "count": 1}, {"buildDate": "2025-10-01", "jira": "QUAN-518", "count": 0}, {"buildDate": "2025-10-01", "jira": "QUAN-519", "count": 1}, {"buildDate": "2025-10-01", "jira": "QUAN-524", "count": 0}, {"buildDate": "2025-10-01", "jira": "QUAN-611", "count": 0}, {"buildDate": "2025-10-01", "jira": "Waived - CPLD Flash timeout", "count": 0}, {"buildDate": "2025-10-01", "jira": "Waived - Connection Problem", "count": 0}, {"buildDate": "2025-10-01", "jira": "Waived - Missing OCP in the system", "count": 7}, {"buildDate": "2025-10-15", "jira": "Need Jira for ASIC alive with PWRGD", "count": 0}, {"buildDate": "2025-10-15", "jira": "Need Jira for FW upload timed out", "count": 0}, {"buildDate": "2025-10-15", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 0}, {"buildDate": "2025-10-15", "jira": "QUAN-366", "count": 2}, {"buildDate": "2025-10-15", "jira": "QUAN-370", "count": 4}, {"buildDate": "2025-10-15", "jira": "QUAN-371", "count": 1}, {"buildDate": "2025-10-15", "jira": "QUAN-487", "count": 2}, {"buildDate": "2025-10-15", "jira": "QUAN-488", "count": 0}, {"buildDate": "2025-10-15", "jira": "QUAN-518", "count": 0}, {"buildDate": "2025-10-15", "jira": "QUAN-519", "count": 3}, {"buildDate": "2025-10-15", "jira": "QUAN-524", "count": 1}, {"buildDate": "2025-10-15", "jira": "QUAN-611", "count": 0}, {"buildDate": "2025-10-15", "jira": "Waived - CPLD Flash timeout", "count": 0}, {"buildDate": "2025-10-15", "jira": "Waived - Connection Problem", "count": 0}, {"buildDate": "2025-10-15", "jira": "Waived - Missing OCP in the system", "count": 0}, {"buildDate": "2025-10-22", "jira": "Need Jira for ASIC alive with PWRGD", "count": 0}, {"buildDate": "2025-10-22", "jira": "Need Jira for FW upload timed out", "count": 0}, {"buildDate": "2025-10-22", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 0}, {"buildDate": "2025-10-22", "jira": "QUAN-366", "count": 1}, {"buildDate": "2025-10-22", "jira": "QUAN-370", "count": 1}, {"buildDate": "2025-10-22", "jira": "QUAN-371", "count": 4}, {"buildDate": "2025-10-22", "jira": "QUAN-487", "count": 0}, {"buildDate": "2025-10-22", "jira": "QUAN-488", "count": 0}, {"buildDate": "2025-10-22", "jira": "QUAN-518", "count": 0}, {"buildDate": "2025-10-22", "jira": "QUAN-519", "count": 2}, {"buildDate": "2025-10-22", "jira": "QUAN-524", "count": 1}, {"buildDate": "2025-10-22", "jira": "QUAN-611", "count": 2}, {"buildDate": "2025-10-22", "jira": "Waived - CPLD Flash timeout", "count": 0}, {"buildDate": "2025-10-22", "jira": "Waived - Connection Problem", "count": 0}, {"buildDate": "2025-10-22", "jira": "Waived - Missing OCP in the system", "count": 0}, {"buildDate": "2025-12-10", "jira": "Need Jira for ASIC alive with PWRGD", "count": 0}, {"buildDate": "2025-12-10", "jira": "Need Jira for FW upload timed out", "count": 0}, {"buildDate": "2025-12-10", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-366", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-370", "count": 3}, {"buildDate": "2025-12-10", "jira": "QUAN-371", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-487", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-488", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-518", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-519", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-524", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-611", "count": 0}, {"buildDate": "2025-12-10", "jira": "Waived - CPLD Flash timeout", "count": 0}, {"buildDate": "2025-12-10", "jira": "Waived - Connection Problem", "count": 0}, {"buildDate": "2025-12-10", "jira": "Waived - Missing OCP in the system", "count": 0}];
        const jiraTrendDataFPY = [{"buildDate": "2025-09-03", "jira": "Need Jira for ASIC alive with PWRGD", "count": 0}, {"buildDate": "2025-09-03", "jira": "Need Jira for FW upload timed out", "count": 0}, {"buildDate": "2025-09-03", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 0}, {"buildDate": "2025-09-03", "jira": "QUAN-366", "count": 1}, {"buildDate": "2025-09-03", "jira": "QUAN-370", "count": 5}, {"buildDate": "2025-09-03", "jira": "QUAN-371", "count": 56}, {"buildDate": "2025-09-03", "jira": "QUAN-487", "count": 12}, {"buildDate": "2025-09-03", "jira": "QUAN-488", "count": 2}, {"buildDate": "2025-09-03", "jira": "QUAN-518", "count": 0}, {"buildDate": "2025-09-03", "jira": "QUAN-519", "count": 0}, {"buildDate": "2025-09-03", "jira": "QUAN-524", "count": 0}, {"buildDate": "2025-09-03", "jira": "QUAN-611", "count": 0}, {"buildDate": "2025-09-03", "jira": "Waived - CPLD Flash timeout", "count": 0}, {"buildDate": "2025-09-03", "jira": "Waived - Connection Problem", "count": 0}, {"buildDate": "2025-09-03", "jira": "Waived - Missing OCP in the system", "count": 10}, {"buildDate": "2025-09-17", "jira": "Need Jira for ASIC alive with PWRGD", "count": 0}, {"buildDate": "2025-09-17", "jira": "Need Jira for FW upload timed out", "count": 0}, {"buildDate": "2025-09-17", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 0}, {"buildDate": "2025-09-17", "jira": "QUAN-366", "count": 0}, {"buildDate": "2025-09-17", "jira": "QUAN-370", "count": 1}, {"buildDate": "2025-09-17", "jira": "QUAN-371", "count": 34}, {"buildDate": "2025-09-17", "jira": "QUAN-487", "count": 3}, {"buildDate": "2025-09-17", "jira": "QUAN-488", "count": 4}, {"buildDate": "2025-09-17", "jira": "QUAN-518", "count": 2}, {"buildDate": "2025-09-17", "jira": "QUAN-519", "count": 1}, {"buildDate": "2025-09-17", "jira": "QUAN-524", "count": 0}, {"buildDate": "2025-09-17", "jira": "QUAN-611", "count": 0}, {"buildDate": "2025-09-17", "jira": "Waived - CPLD Flash timeout", "count": 0}, {"buildDate": "2025-09-17", "jira": "Waived - Connection Problem", "count": 0}, {"buildDate": "2025-09-17", "jira": "Waived - Missing OCP in the system", "count": 9}, {"buildDate": "2025-09-24", "jira": "Need Jira for ASIC alive with PWRGD", "count": 0}, {"buildDate": "2025-09-24", "jira": "Need Jira for FW upload timed out", "count": 0}, {"buildDate": "2025-09-24", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 1}, {"buildDate": "2025-09-24", "jira": "QUAN-366", "count": 1}, {"buildDate": "2025-09-24", "jira": "QUAN-370", "count": 0}, {"buildDate": "2025-09-24", "jira": "QUAN-371", "count": 1}, {"buildDate": "2025-09-24", "jira": "QUAN-487", "count": 2}, {"buildDate": "2025-09-24", "jira": "QUAN-488", "count": 3}, {"buildDate": "2025-09-24", "jira": "QUAN-518", "count": 0}, {"buildDate": "2025-09-24", "jira": "QUAN-519", "count": 3}, {"buildDate": "2025-09-24", "jira": "QUAN-524", "count": 0}, {"buildDate": "2025-09-24", "jira": "QUAN-611", "count": 0}, {"buildDate": "2025-09-24", "jira": "Waived - CPLD Flash timeout", "count": 0}, {"buildDate": "2025-09-24", "jira": "Waived - Connection Problem", "count": 0}, {"buildDate": "2025-09-24", "jira": "Waived - Missing OCP in the system", "count": 7}, {"buildDate": "2025-10-01", "jira": "Need Jira for ASIC alive with PWRGD", "count": 0}, {"buildDate": "2025-10-01", "jira": "Need Jira for FW upload timed out", "count": 0}, {"buildDate": "2025-10-01", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 0}, {"buildDate": "2025-10-01", "jira": "QUAN-366", "count": 1}, {"buildDate": "2025-10-01", "jira": "QUAN-370", "count": 1}, {"buildDate": "2025-10-01", "jira": "QUAN-371", "count": 10}, {"buildDate": "2025-10-01", "jira": "QUAN-487", "count": 6}, {"buildDate": "2025-10-01", "jira": "QUAN-488", "count": 4}, {"buildDate": "2025-10-01", "jira": "QUAN-518", "count": 0}, {"buildDate": "2025-10-01", "jira": "QUAN-519", "count": 1}, {"buildDate": "2025-10-01", "jira": "QUAN-524", "count": 0}, {"buildDate": "2025-10-01", "jira": "QUAN-611", "count": 0}, {"buildDate": "2025-10-01", "jira": "Waived - CPLD Flash timeout", "count": 0}, {"buildDate": "2025-10-01", "jira": "Waived - Connection Problem", "count": 1}, {"buildDate": "2025-10-01", "jira": "Waived - Missing OCP in the system", "count": 13}, {"buildDate": "2025-10-15", "jira": "Need Jira for ASIC alive with PWRGD", "count": 0}, {"buildDate": "2025-10-15", "jira": "Need Jira for FW upload timed out", "count": 1}, {"buildDate": "2025-10-15", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 0}, {"buildDate": "2025-10-15", "jira": "QUAN-366", "count": 3}, {"buildDate": "2025-10-15", "jira": "QUAN-370", "count": 5}, {"buildDate": "2025-10-15", "jira": "QUAN-371", "count": 6}, {"buildDate": "2025-10-15", "jira": "QUAN-487", "count": 2}, {"buildDate": "2025-10-15", "jira": "QUAN-488", "count": 0}, {"buildDate": "2025-10-15", "jira": "QUAN-518", "count": 0}, {"buildDate": "2025-10-15", "jira": "QUAN-519", "count": 6}, {"buildDate": "2025-10-15", "jira": "QUAN-524", "count": 1}, {"buildDate": "2025-10-15", "jira": "QUAN-611", "count": 0}, {"buildDate": "2025-10-15", "jira": "Waived - CPLD Flash timeout", "count": 3}, {"buildDate": "2025-10-15", "jira": "Waived - Connection Problem", "count": 0}, {"buildDate": "2025-10-15", "jira": "Waived - Missing OCP in the system", "count": 6}, {"buildDate": "2025-10-22", "jira": "Need Jira for ASIC alive with PWRGD", "count": 0}, {"buildDate": "2025-10-22", "jira": "Need Jira for FW upload timed out", "count": 0}, {"buildDate": "2025-10-22", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 0}, {"buildDate": "2025-10-22", "jira": "QUAN-366", "count": 1}, {"buildDate": "2025-10-22", "jira": "QUAN-370", "count": 1}, {"buildDate": "2025-10-22", "jira": "QUAN-371", "count": 4}, {"buildDate": "2025-10-22", "jira": "QUAN-487", "count": 0}, {"buildDate": "2025-10-22", "jira": "QUAN-488", "count": 0}, {"buildDate": "2025-10-22", "jira": "QUAN-518", "count": 0}, {"buildDate": "2025-10-22", "jira": "QUAN-519", "count": 2}, {"buildDate": "2025-10-22", "jira": "QUAN-524", "count": 1}, {"buildDate": "2025-10-22", "jira": "QUAN-611", "count": 2}, {"buildDate": "2025-10-22", "jira": "Waived - CPLD Flash timeout", "count": 0}, {"buildDate": "2025-10-22", "jira": "Waived - Connection Problem", "count": 0}, {"buildDate": "2025-10-22", "jira": "Waived - Missing OCP in the system", "count": 0}, {"buildDate": "2025-12-10", "jira": "Need Jira for ASIC alive with PWRGD", "count": 6}, {"buildDate": "2025-12-10", "jira": "Need Jira for FW upload timed out", "count": 0}, {"buildDate": "2025-12-10", "jira": "Need Jira for TMP75 failure during I2C Test", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-366", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-370", "count": 3}, {"buildDate": "2025-12-10", "jira": "QUAN-371", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-487", "count": 1}, {"buildDate": "2025-12-10", "jira": "QUAN-488", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-518", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-519", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-524", "count": 0}, {"buildDate": "2025-12-10", "jira": "QUAN-611", "count": 0}, {"buildDate": "2025-12-10", "jira": "Waived - CPLD Flash timeout", "count": 0}, {"buildDate": "2025-12-10", "jira": "Waived - Connection Problem", "count": 0}, {"buildDate": "2025-12-10", "jira": "Waived - Missing OCP in the system", "count": 0}];
        const jiraSummaryData = [{"jira": "QUAN-371", "fpyUnits": 111, "recovered": 18, "apyUnits": 93, "fpyRate": 27.54, "apyRate": 23.08}, {"jira": "Waived - Missing OCP in the system", "fpyUnits": 45, "recovered": 21, "apyUnits": 24, "fpyRate": 11.17, "apyRate": 5.96}, {"jira": "QUAN-487", "fpyUnits": 26, "recovered": 10, "apyUnits": 16, "fpyRate": 6.45, "apyRate": 3.97}, {"jira": "QUAN-370", "fpyUnits": 16, "recovered": 2, "apyUnits": 14, "fpyRate": 3.97, "apyRate": 3.47}, {"jira": "QUAN-488", "fpyUnits": 13, "recovered": 7, "apyUnits": 6, "fpyRate": 3.23, "apyRate": 1.49}, {"jira": "QUAN-519", "fpyUnits": 13, "recovered": 3, "apyUnits": 10, "fpyRate": 3.23, "apyRate": 2.48}, {"jira": "QUAN-366", "fpyUnits": 7, "recovered": 1, "apyUnits": 6, "fpyRate": 1.74, "apyRate": 1.49}, {"jira": "Need Jira for ASIC alive with PWRGD", "fpyUnits": 6, "recovered": 6, "apyUnits": 0, "fpyRate": 1.49, "apyRate": 0.0}, {"jira": "Waived - CPLD Flash timeout", "fpyUnits": 3, "recovered": 3, "apyUnits": 0, "fpyRate": 0.74, "apyRate": 0.0}, {"jira": "QUAN-518", "fpyUnits": 2, "recovered": 1, "apyUnits": 1, "fpyRate": 0.5, "apyRate": 0.25}, {"jira": "QUAN-524", "fpyUnits": 2, "recovered": 0, "apyUnits": 2, "fpyRate": 0.5, "apyRate": 0.5}, {"jira": "QUAN-611", "fpyUnits": 2, "recovered": 0, "apyUnits": 2, "fpyRate": 0.5, "apyRate": 0.5}, {"jira": "Need Jira for FW upload timed out", "fpyUnits": 1, "recovered": 1, "apyUnits": 0, "fpyRate": 0.25, "apyRate": 0.0}, {"jira": "Need Jira for TMP75 failure during I2C Test", "fpyUnits": 1, "recovered": 0, "apyUnits": 1, "fpyRate": 0.25, "apyRate": 0.25}, {"jira": "Waived - Connection Problem", "fpyUnits": 1, "recovered": 1, "apyUnits": 0, "fpyRate": 0.25, "apyRate": 0.0}];
        const allHeatmaps = {"UBB_ASIC": {"Need Jira for ASIC alive with PWRGD": {"UBB_1": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 3, "A7": 0, "A8": 0}, "UBB_2": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 3, "A7": 0, "A8": 0}, "UBB_3": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 0, "A7": 0, "A8": 0}, "UBB_4": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 0, "A7": 0, "A8": 0}}, "QUAN-366": {"UBB_1": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 0, "A7": 0, "A8": 0}, "UBB_2": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 0, "A7": 1, "A8": 0}, "UBB_3": {"A1": 0, "A2": 0, "A3": 1, "A4": 0, "A5": 0, "A6": 2, "A7": 5, "A8": 0}, "UBB_4": {"A1": 0, "A2": 0, "A3": 1, "A4": 4, "A5": 0, "A6": 0, "A7": 0, "A8": 0}}, "QUAN-370": {"UBB_1": {"A1": 0, "A2": 2, "A3": 2, "A4": 0, "A5": 0, "A6": 1, "A7": 2, "A8": 19}, "UBB_2": {"A1": 0, "A2": 0, "A3": 0, "A4": 2, "A5": 0, "A6": 17, "A7": 2, "A8": 5}, "UBB_3": {"A1": 0, "A2": 0, "A3": 0, "A4": 2, "A5": 0, "A6": 0, "A7": 2, "A8": 0}, "UBB_4": {"A1": 0, "A2": 0, "A3": 1, "A4": 0, "A5": 0, "A6": 1, "A7": 0, "A8": 38}}, "QUAN-371": {"UBB_1": {"A1": 24, "A2": 30, "A3": 33, "A4": 37, "A5": 28, "A6": 29, "A7": 43, "A8": 26}, "UBB_2": {"A1": 26, "A2": 24, "A3": 32, "A4": 27, "A5": 18, "A6": 27, "A7": 28, "A8": 49}, "UBB_3": {"A1": 25, "A2": 31, "A3": 28, "A4": 13, "A5": 28, "A6": 20, "A7": 24, "A8": 29}, "UBB_4": {"A1": 33, "A2": 30, "A3": 24, "A4": 18, "A5": 20, "A6": 19, "A7": 22, "A8": 23}}, "QUAN-487": {"UBB_1": {"A1": 1, "A2": 0, "A3": 0, "A4": 1, "A5": 1, "A6": 0, "A7": 0, "A8": 5}, "UBB_2": {"A1": 0, "A2": 0, "A3": 10, "A4": 0, "A5": 0, "A6": 0, "A7": 10, "A8": 8}, "UBB_3": {"A1": 1, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 0, "A7": 0, "A8": 0}, "UBB_4": {"A1": 1, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 0, "A7": 0, "A8": 0}}, "QUAN-488": {"UBB_1": {"A1": 0, "A2": 0, "A3": 0, "A4": 5, "A5": 10, "A6": 0, "A7": 0, "A8": 0}, "UBB_2": {"A1": 0, "A2": 10, "A3": 0, "A4": 5, "A5": 10, "A6": 0, "A7": 14, "A8": 20}, "UBB_3": {"A1": 0, "A2": 0, "A3": 0, "A4": 5, "A5": 0, "A6": 0, "A7": 0, "A8": 20}, "UBB_4": {"A1": 0, "A2": 0, "A3": 0, "A4": 25, "A5": 0, "A6": 10, "A7": 29, "A8": 5}}, "QUAN-518": {"UBB_1": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 1, "A7": 0, "A8": 0}, "UBB_2": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 0, "A7": 0, "A8": 0}, "UBB_3": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 1, "A7": 0, "A8": 0}, "UBB_4": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 0, "A7": 0, "A8": 0}}, "QUAN-519": {"UBB_1": {"A1": 0, "A2": 0, "A3": 0, "A4": 5, "A5": 0, "A6": 5, "A7": 0, "A8": 5}, "UBB_2": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 5, "A7": 5, "A8": 0}, "UBB_3": {"A1": 0, "A2": 0, "A3": 1, "A4": 0, "A5": 15, "A6": 2, "A7": 0, "A8": 7}, "UBB_4": {"A1": 0, "A2": 2, "A3": 1, "A4": 5, "A5": 2, "A6": 6, "A7": 0, "A8": 0}}, "QUAN-524": {"UBB_1": {"A1": 0, "A2": 0, "A3": 0, "A4": 21, "A5": 0, "A6": 0, "A7": 0, "A8": 0}, "UBB_2": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 0, "A7": 15, "A8": 0}, "UBB_3": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 0, "A7": 0, "A8": 0}, "UBB_4": {"A1": 0, "A2": 0, "A3": 0, "A4": 0, "A5": 0, "A6": 0, "A7": 0, "A8": 0}}}, "UBB_ETH": {"QUAN-371": {"UBB_1": {"ETH0": 0, "ETH1": 29, "ETH2": 21, "ETH3": 32, "ETH4": 25, "ETH5": 0, "ETH6": 31, "ETH7": 34, "ETH8": 0, "ETH9": 44, "ETH10": 10, "ETH11": 7, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "UBB_2": {"ETH0": 0, "ETH1": 29, "ETH2": 27, "ETH3": 26, "ETH4": 31, "ETH5": 0, "ETH6": 29, "ETH7": 29, "ETH8": 1, "ETH9": 29, "ETH10": 12, "ETH11": 4, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "UBB_3": {"ETH0": 0, "ETH1": 18, "ETH2": 15, "ETH3": 23, "ETH4": 14, "ETH5": 1, "ETH6": 17, "ETH7": 31, "ETH8": 0, "ETH9": 39, "ETH10": 21, "ETH11": 5, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "UBB_4": {"ETH0": 0, "ETH1": 16, "ETH2": 21, "ETH3": 27, "ETH4": 17, "ETH5": 0, "ETH6": 21, "ETH7": 28, "ETH8": 0, "ETH9": 24, "ETH10": 10, "ETH11": 12, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}}, "QUAN-488": {"UBB_1": {"ETH0": 0, "ETH1": 0, "ETH2": 5, "ETH3": 5, "ETH4": 0, "ETH5": 0, "ETH6": 5, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "UBB_2": {"ETH0": 0, "ETH1": 0, "ETH2": 5, "ETH3": 5, "ETH4": 5, "ETH5": 0, "ETH6": 10, "ETH7": 19, "ETH8": 0, "ETH9": 15, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "UBB_3": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 10, "ETH5": 0, "ETH6": 15, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "UBB_4": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 10, "ETH5": 0, "ETH6": 15, "ETH7": 19, "ETH8": 0, "ETH9": 15, "ETH10": 10, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}}, "QUAN-518": {"UBB_1": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 1, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "UBB_2": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "UBB_3": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 1, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "UBB_4": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}}}, "UBB_CTRL": {"QUAN-519": {"UBB_1": {"CtrlA": 0, "CtrlB": 0, "CtrlC": 0, "CtrlD": 1, "CtrlE": 1, "CtrlF": 1, "CtrlG": 1, "CtrlH": 11}, "UBB_2": {"CtrlA": 0, "CtrlB": 0, "CtrlC": 0, "CtrlD": 0, "CtrlE": 0, "CtrlF": 10, "CtrlG": 0, "CtrlH": 0}, "UBB_3": {"CtrlA": 0, "CtrlB": 1, "CtrlC": 3, "CtrlD": 2, "CtrlE": 6, "CtrlF": 6, "CtrlG": 6, "CtrlH": 1}, "UBB_4": {"CtrlA": 0, "CtrlB": 5, "CtrlC": 2, "CtrlD": 1, "CtrlE": 1, "CtrlF": 1, "CtrlG": 3, "CtrlH": 3}}}, "ASIC_ETH": {"QUAN-371": {"ASIC_1": {"ETH0": 0, "ETH1": 8, "ETH2": 12, "ETH3": 21, "ETH4": 16, "ETH5": 0, "ETH6": 9, "ETH7": 14, "ETH8": 0, "ETH9": 15, "ETH10": 8, "ETH11": 2, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_2": {"ETH0": 0, "ETH1": 10, "ETH2": 16, "ETH3": 9, "ETH4": 12, "ETH5": 0, "ETH6": 11, "ETH7": 11, "ETH8": 0, "ETH9": 14, "ETH10": 22, "ETH11": 8, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_3": {"ETH0": 0, "ETH1": 3, "ETH2": 12, "ETH3": 11, "ETH4": 17, "ETH5": 0, "ETH6": 20, "ETH7": 16, "ETH8": 0, "ETH9": 20, "ETH10": 11, "ETH11": 7, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_4": {"ETH0": 0, "ETH1": 4, "ETH2": 17, "ETH3": 20, "ETH4": 1, "ETH5": 1, "ETH6": 0, "ETH7": 17, "ETH8": 0, "ETH9": 24, "ETH10": 4, "ETH11": 6, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_5": {"ETH0": 0, "ETH1": 15, "ETH2": 0, "ETH3": 3, "ETH4": 7, "ETH5": 0, "ETH6": 14, "ETH7": 14, "ETH8": 1, "ETH9": 23, "ETH10": 2, "ETH11": 1, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_6": {"ETH0": 0, "ETH1": 14, "ETH2": 7, "ETH3": 14, "ETH4": 8, "ETH5": 0, "ETH6": 10, "ETH7": 16, "ETH8": 0, "ETH9": 10, "ETH10": 4, "ETH11": 1, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_7": {"ETH0": 0, "ETH1": 20, "ETH2": 8, "ETH3": 10, "ETH4": 18, "ETH5": 0, "ETH6": 26, "ETH7": 4, "ETH8": 0, "ETH9": 14, "ETH10": 0, "ETH11": 1, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_8": {"ETH0": 0, "ETH1": 18, "ETH2": 12, "ETH3": 20, "ETH4": 8, "ETH5": 0, "ETH6": 8, "ETH7": 30, "ETH8": 0, "ETH9": 16, "ETH10": 2, "ETH11": 2, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}}, "QUAN-488": {"ASIC_1": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_2": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 5, "ETH8": 0, "ETH9": 5, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_3": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_4": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 20, "ETH7": 10, "ETH8": 0, "ETH9": 10, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_5": {"ETH0": 0, "ETH1": 0, "ETH2": 5, "ETH3": 5, "ETH4": 5, "ETH5": 0, "ETH6": 5, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_6": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 5, "ETH8": 0, "ETH9": 5, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_7": {"ETH0": 0, "ETH1": 0, "ETH2": 5, "ETH3": 5, "ETH4": 10, "ETH5": 0, "ETH6": 10, "ETH7": 8, "ETH8": 0, "ETH9": 0, "ETH10": 5, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_8": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 10, "ETH5": 0, "ETH6": 10, "ETH7": 10, "ETH8": 0, "ETH9": 10, "ETH10": 5, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}}, "QUAN-518": {"ASIC_1": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_2": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_3": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_4": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_5": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_6": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 2, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_7": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}, "ASIC_8": {"ETH0": 0, "ETH1": 0, "ETH2": 0, "ETH3": 0, "ETH4": 0, "ETH5": 0, "ETH6": 0, "ETH7": 0, "ETH8": 0, "ETH9": 0, "ETH10": 0, "ETH11": 0, "ETH12": 0, "ETH13": 0, "ETH14": 0, "ETH15": 0}}}, "ASIC_CTRL": {"QUAN-519": {"ASIC_1": {"CtrlA": 0, "CtrlB": 0, "CtrlC": 0, "CtrlD": 0, "CtrlE": 0, "CtrlF": 0, "CtrlG": 0, "CtrlH": 0}, "ASIC_2": {"CtrlA": 0, "CtrlB": 0, "CtrlC": 0, "CtrlD": 0, "CtrlE": 0, "CtrlF": 0, "CtrlG": 1, "CtrlH": 1}, "ASIC_3": {"CtrlA": 0, "CtrlB": 0, "CtrlC": 2, "CtrlD": 0, "CtrlE": 0, "CtrlF": 0, "CtrlG": 0, "CtrlH": 0}, "ASIC_4": {"CtrlA": 0, "CtrlB": 5, "CtrlC": 0, "CtrlD": 0, "CtrlE": 0, "CtrlF": 0, "CtrlG": 0, "CtrlH": 5}, "ASIC_5": {"CtrlA": 0, "CtrlB": 0, "CtrlC": 0, "CtrlD": 0, "CtrlE": 5, "CtrlF": 5, "CtrlG": 6, "CtrlH": 1}, "ASIC_6": {"CtrlA": 0, "CtrlB": 0, "CtrlC": 2, "CtrlD": 2, "CtrlE": 1, "CtrlF": 6, "CtrlG": 1, "CtrlH": 6}, "ASIC_7": {"CtrlA": 0, "CtrlB": 0, "CtrlC": 0, "CtrlD": 0, "CtrlE": 0, "CtrlF": 5, "CtrlG": 0, "CtrlH": 0}, "ASIC_8": {"CtrlA": 0, "CtrlB": 1, "CtrlC": 1, "CtrlD": 2, "CtrlE": 2, "CtrlF": 2, "CtrlG": 2, "CtrlH": 2}}}};

        // Populate overall statistics
        document.getElementById('statTotalUnits').textContent = overallStats.totalUnits;
        document.getElementById('statPassed').textContent = overallStats.passed;
        document.getElementById('statFixed').textContent = overallStats.fixed;
        document.getElementById('statFailed').textContent = overallStats.failed;
        document.getElementById('statFPY').textContent = `${overallStats.overallFPY}%`;
        document.getElementById('statAPY').textContent = `${overallStats.overallAPY}%`;

        // Enhanced APY & FPY Chart
        new Chart(document.getElementById('yieldChart').getContext('2d'), {
            type: 'line',
            data: { 
                labels: yieldData.map(d => d.buildDate), 
                datasets: [
                    { 
                        label: 'APY (%)', 
                        data: yieldData.map(d => d.apy), 
                        borderColor: '#4fc3f7', 
                        backgroundColor: 'rgba(79, 195, 247, 0.2)', 
                        tension: 0.3, 
                        fill: true,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    },
                    { 
                        label: 'FPY (%)', 
                        data: yieldData.map(d => d.fpy), 
                        borderColor: '#ff9800', 
                        backgroundColor: 'rgba(255, 152, 0, 0.2)', 
                        tension: 0.3, 
                        fill: true,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }
                ]
            },
            options: { 
                responsive: true, 
                maintainAspectRatio: false, 
                plugins: { 
                    legend: { labels: { color: '#e8e8e8', font: { size: 12 } } }, 
                    title: { display: true, text: 'Yield Trends', color: '#4fc3f7', font: { size: 14, weight: 'bold' } },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                const buildDate = context[0].label;
                                const buildData = yieldData.find(d => d.buildDate === buildDate);
                                return `Build: ${buildDate} (${buildData.totalUnits} units)`;
                            },
                            label: function(context) {
                                const buildData = yieldData[context.dataIndex];
                                if (context.dataset.label === 'APY (%)') {
                                    return `APY: ${context.parsed.y}% (Passed: ${buildData.passed}, Fixed: ${buildData.fixed})`;
                                } else {
                                    return `FPY: ${context.parsed.y}% (Passed: ${buildData.passed} / ${buildData.totalUnits})`;
                                }
                            }
                        },
                        backgroundColor: 'rgba(30, 42, 58, 0.95)',
                        titleColor: '#4fc3f7',
                        bodyColor: '#e8e8e8',
                        borderColor: '#4fc3f7',
                        borderWidth: 1,
                        padding: 12,
                        displayColors: true
                    },
                    datalabels: {
                        display: true,
                        color: '#e8e8e8',
                        font: { size: 10, weight: 'bold' },
                        formatter: function(value) {
                            return value + '%';
                        },
                        align: 'top',
                        offset: 4
                    }
                }, 
                scales: { 
                    y: { 
                        beginAtZero: true, 
                        max: 100, 
                        ticks: { 
                            color: '#b0c4de', 
                            font: { size: 11 },
                            callback: function(value) {
                                return value + '%';
                            }
                        }, 
                        grid: { color: 'rgba(176, 196, 222, 0.1)' } 
                    }, 
                    x: { 
                        ticks: { color: '#b0c4de', font: { size: 11 } }, 
                        grid: { color: 'rgba(176, 196, 222, 0.1)' } 
                    }
                }
            }
        });

        // APY Chart
        let jiraTrendChartAPY = null;
        const jiraTrendSelectAPY = document.getElementById('jiraTrendSelectAPY');
        const uniqueJirasAPY = [...new Set(jiraTrendDataAPY.filter(d => d.count > 0).map(d => d.jira))];
        uniqueJirasAPY.forEach(jira => {
            const option = document.createElement('option');
            option.value = jira;
            const summary = jiraMapping[jira] || '';
            option.textContent = summary ? `${jira} - ${summary}` : jira;
            jiraTrendSelectAPY.appendChild(option);
        });
        if (uniqueJirasAPY.length > 0) {
            const shuffled = uniqueJirasAPY.sort(() => 0.5 - Math.random());
            const defaultSelection = shuffled.slice(0, Math.min(3, uniqueJirasAPY.length));
            Array.from(jiraTrendSelectAPY.options).forEach(option => {
                if (defaultSelection.includes(option.value)) {
                    option.selected = true;
                }
            });
        }

        // FPY Chart
        let jiraTrendChartFPY = null;
        const jiraTrendSelectFPY = document.getElementById('jiraTrendSelectFPY');
        const uniqueJirasFPY = [...new Set(jiraTrendDataFPY.map(d => d.jira))];
        uniqueJirasFPY.forEach(jira => {
            const option = document.createElement('option');
            option.value = jira;
            const summary = jiraMapping[jira] || '';
            option.textContent = summary ? `${jira} - ${summary}` : jira;
            jiraTrendSelectFPY.appendChild(option);
        });
        if (uniqueJirasFPY.length > 0) {
            const shuffled = uniqueJirasFPY.sort(() => 0.5 - Math.random());
            const defaultSelection = shuffled.slice(0, Math.min(3, uniqueJirasFPY.length));
            Array.from(jiraTrendSelectFPY.options).forEach(option => {
                if (defaultSelection.includes(option.value)) {
                    option.selected = true;
                }
            });
        }

        window.jiraTrendDisplayMode = 'percent';
        window.yieldDisplayMode = 'percent';
        window.fpyTrendDisplayMode = 'percent'; // Default: 'percent' or 'units'

        function updateYieldChart() {
            // Get total units for percentage conversion
            const buildDates = yieldData.map(d => d.buildDate);
            let apyData, fpyData, yAxisLabel, yTickFormatter, dataLabelFormatter, maxValue;

            if (window.yieldDisplayMode === 'units') {
                // Convert percentages to units
                apyData = yieldData.map(d => {
                    const totalUnits = d.totalUnits || 1;
                    return Math.round((d.apy / 100) * totalUnits);
                });
                fpyData = yieldData.map(d => {
                    const totalUnits = d.totalUnits || 1;
                    return Math.round((d.fpy / 100) * totalUnits);
                });
                yAxisLabel = 'Units';
                yTickFormatter = function(value) { return value; };
                dataLabelFormatter = function(value) { return value; };
            } else {
                // Show percentages (original behavior)
                apyData = yieldData.map(d => d.apy);
                fpyData = yieldData.map(d => d.fpy);
                yAxisLabel = 'Percentage (%)';
                yTickFormatter = function(value) { return value + '%'; };
                dataLabelFormatter = function(value) { return value + '%'; };
            }

            if (window.yieldChart) { window.yieldChart.destroy(); }

            window.yieldChart = new Chart(document.getElementById('yieldChart').getContext('2d'), {
                type: 'line',
                data: { 
                    labels: buildDates, 
                    datasets: [
                        { 
                            label: 'APY (' + yAxisLabel + ')', 
                            data: apyData, 
                            borderColor: '#4fc3f7', 
                            backgroundColor: 'rgba(79, 195, 247, 0.2)', 
                            tension: 0.3, 
                            fill: true,
                            pointRadius: 5,
                            pointHoverRadius: 7
                        },
                        { 
                            label: 'FPY (' + yAxisLabel + ')', 
                            data: fpyData, 
                            borderColor: '#ff9800', 
                            backgroundColor: 'rgba(255, 152, 0, 0.2)', 
                            tension: 0.3, 
                            fill: true,
                            pointRadius: 5,
                            pointHoverRadius: 7
                        }
                    ]
                },
                options: { 
                    responsive: true, 
                    maintainAspectRatio: false, 
                    plugins: { 
                        legend: { labels: { color: '#e8e8e8', font: { size: 12 } } }, 
                        title: { display: true, text: 'Yield Trends', color: '#4fc3f7', font: { size: 14, weight: 'bold' } },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.parsed.y + (window.yieldDisplayMode === 'units' ? ' units' : '%');
                                }
                            }
                        },
                        datalabels: {
                            display: true,
                            color: '#e8e8e8',
                            anchor: 'end',
                            align: 'top',
                            font: { size: 10, weight: 'bold' },
                            formatter: dataLabelFormatter
                        }
                    }, 
                    scales: { 
                        y: { 
                            beginAtZero: true,
                            max: window.yieldDisplayMode === 'units' ? undefined : 100,
                            ticks: { 
                                color: '#b0c4de', 
                                font: { size: 11 },
                                callback: yTickFormatter
                            }, 
                            grid: { color: 'rgba(176, 196, 222, 0.1)' },
                            title: { display: true, text: yAxisLabel, color: '#4fc3f7', font: { size: 12, weight: 'bold' } }
                        }, 
                        x: { 
                            ticks: { color: '#b0c4de', font: { size: 11 } }, 
                            grid: { color: 'rgba(176, 196, 222, 0.1)' } 
                        }
                    }
                }
            });
        }

        function updateJiraTrendChartAPY() {
            const selectedJiras = Array.from(jiraTrendSelectAPY.selectedOptions).map(opt => opt.value);
            if (selectedJiras.length === 0) {
                if (jiraTrendChartAPY) { jiraTrendChartAPY.destroy(); jiraTrendChartAPY = null; }
                return;
            }
            const dates = [...new Set(jiraTrendDataAPY.map(d => d.buildDate))].sort();
            const datasets = selectedJiras.map((jira, idx) => {
                const color = `hsl(${idx * (360 / selectedJiras.length)}, 70%, 60%)`;
                return { 
                    label: jira, 
                    data: dates.map(date => { 
                        const item = jiraTrendDataAPY.find(d => d.jira === jira && d.buildDate === date); 
                        const buildData = yieldData.find(y => y.buildDate === date);
                        const totalUnits = buildData ? buildData.totalUnits : 1;
                        const percentage = item ? ((item.count / totalUnits) * 100).toFixed(2) : 0;
                        const displayValue = window.jiraTrendDisplayMode === 'units' ? (item ? item.count : 0) : percentage;
                        return displayValue;
                    }),
                    rawData: dates.map(date => {
                        const item = jiraTrendDataAPY.find(d => d.jira === jira && d.buildDate === date);
                        return item ? item.count : 0;
                    }), borderColor: color, backgroundColor: color + '33', tension: 0.3 };
            });
            if (jiraTrendChartAPY) { jiraTrendChartAPY.destroy(); }
            jiraTrendChartAPY = new Chart(document.getElementById('jiraTrendChartAPY').getContext('2d'), {
                type: 'line', data: { labels: dates, datasets: datasets }, options: { 
                    responsive: true, 
                    maintainAspectRatio: false, 
                    plugins: { 
                        legend: { labels: { color: '#e8e8e8', font: { size: 11 } } }, 
                        title: { display: true, text: 'Jira Trend Analysis', color: '#4fc3f7', font: { size: 14, weight: 'bold' } },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.dataset.label || '';
                                    const rawValue = context.dataset.rawData[context.dataIndex];
                                    if (window.jiraTrendDisplayMode === 'units') {
                                        return label + ': ' + rawValue + ' units';
                                    } else {
                                        const percentage = context.parsed.y;
                                        return label + ': ' + percentage + '% (' + rawValue + ' units)';
                                    }
                                }
                            }
                        }
                    }, scales: { y: { beginAtZero: true, title: { display: true, text: window.jiraTrendDisplayMode === 'units' ? 'APY Units' : 'APY %', color: '#4fc3f7', font: { size: 12, weight: 'bold' } }, ticks: { color: '#b0c4de', stepSize: 1, font: { size: 11 } }, grid: { color: 'rgba(176, 196, 222, 0.1)' } }, x: { ticks: { color: '#b0c4de', font: { size: 11 } }, grid: { color: 'rgba(176, 196, 222, 0.1)' } }}}
            });
        }

        function updateJiraTrendChartFPY() {
            const selectedJiras = Array.from(jiraTrendSelectFPY.selectedOptions).map(opt => opt.value);
            if (selectedJiras.length === 0) {
                if (jiraTrendChartFPY) { jiraTrendChartFPY.destroy(); jiraTrendChartFPY = null; }
                return;
            }
            const dates = [...new Set(jiraTrendDataFPY.map(d => d.buildDate))].sort();
            const datasets = selectedJiras.map((jira, idx) => {
                const color = `hsl(${idx * (360 / selectedJiras.length)}, 70%, 60%)`;
                return { 
                    label: jira, 
                    data: dates.map(date => { 
                        const item = jiraTrendDataFPY.find(d => d.jira === jira && d.buildDate === date); 
                        const buildData = yieldData.find(y => y.buildDate === date);
                        const totalUnits = buildData ? buildData.totalUnits : 1;
                        const percentage = item ? ((item.count / totalUnits) * 100).toFixed(2) : 0;
                        const displayValue = window.fpyTrendDisplayMode === 'units' ? (item ? item.count : 0) : percentage;
                        return displayValue;
                    }),
                    rawData: dates.map(date => {
                        const item = jiraTrendDataFPY.find(d => d.jira === jira && d.buildDate === date);
                        return item ? item.count : 0;
                    }), borderColor: color, backgroundColor: color + '33', tension: 0.3 };
            });
            if (jiraTrendChartFPY) { jiraTrendChartFPY.destroy(); }
            jiraTrendChartFPY = new Chart(document.getElementById('jiraTrendChartFPY').getContext('2d'), {
                type: 'line', data: { labels: dates, datasets: datasets }, options: { 
                    responsive: true, 
                    maintainAspectRatio: false, 
                    plugins: { 
                        legend: { labels: { color: '#e8e8e8', font: { size: 11 } } }, 
                        title: { display: true, text: 'Jira Trend Analysis', color: '#4fc3f7', font: { size: 14, weight: 'bold' } },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.dataset.label || '';
                                    const rawValue = context.dataset.rawData[context.dataIndex];
                                    if (window.fpyTrendDisplayMode === 'units') {
                                        return label + ': ' + rawValue + ' units';
                                    } else {
                                        const percentage = context.parsed.y;
                                        return label + ': ' + percentage + '% (' + rawValue + ' units)';
                                    }
                                }
                            }
                        }
                    }, scales: { y: { beginAtZero: true, title: { display: true, text: window.fpyTrendDisplayMode === 'units' ? 'FPY Units' : 'FPY %', color: '#4fc3f7', font: { size: 12, weight: 'bold' } }, ticks: { color: '#b0c4de', stepSize: 1, font: { size: 11 } }, grid: { color: 'rgba(176, 196, 222, 0.1)' } }, x: { ticks: { color: '#b0c4de', font: { size: 11 } }, grid: { color: 'rgba(176, 196, 222, 0.1)' } }}}
            });
        }

        jiraTrendSelectAPY.addEventListener('change', updateJiraTrendChartAPY);
        jiraTrendSelectFPY.addEventListener('change', updateJiraTrendChartFPY);
        updateJiraTrendChartAPY();
        updateJiraTrendChartFPY();


        const heatmapTypeSelect = document.getElementById('heatmapTypeSelect');
        const heatmapJiraSelect = document.getElementById('heatmapJiraSelect');
        const heatmapDisplay = document.getElementById('heatmapDisplay');
        const allJiras = new Set();
        Object.values(allHeatmaps).forEach(heatmapType => {
            Object.keys(heatmapType).forEach(jira => allJiras.add(jira));
        });
        [...allJiras].sort().forEach(jira => {
            const option = document.createElement('option');
            option.value = jira;
            const summary = jiraMapping[jira] || '';
            option.textContent = summary ? `${jira} - ${summary}` : jira;
            heatmapJiraSelect.appendChild(option);
        });
        function updateHeatmapTypeOptions() {
            const selectedJira = heatmapJiraSelect.value;
            if (!selectedJira) {
                heatmapTypeSelect.innerHTML = '<option value="">Select Jira first</option>';
                heatmapDisplay.innerHTML = '<div class="no-data">Select a Jira code</div>';
                return;
            }
            const availableTypes = [];
            const typeLabels = {
                'UBB_ASIC': 'UBB vs ASIC',
                'UBB_ETH': 'UBB vs ETH',
                'UBB_CTRL': 'UBB vs Ctrl',
                'ASIC_ETH': 'ASIC vs ETH',
                'ASIC_CTRL': 'ASIC vs Ctrl'
            };
            Object.keys(allHeatmaps).forEach(heatmapType => {
                if (allHeatmaps[heatmapType][selectedJira]) {
                    availableTypes.push(heatmapType);
                }
            });
            heatmapTypeSelect.innerHTML = '';
            if (availableTypes.length === 0) {
                heatmapTypeSelect.innerHTML = '<option value="">No heatmaps available</option>';
                heatmapDisplay.innerHTML = '<div class="no-data">No heatmap data for this Jira</div>';
            } else {
                availableTypes.forEach(type => {
                    const option = document.createElement('option');
                    option.value = type;
                    option.textContent = typeLabels[type];
                    heatmapTypeSelect.appendChild(option);
                });
                displayHeatmap();
            }
        }
        function getColorForValue(value, max) {
            if (value === 0) return '#2c3e50';
            const intensity = Math.min(value / max, 1);
            return `rgb(${Math.floor(255 * intensity)}, ${Math.floor(100 * (1 - intensity))}, 50)`;
        }
        function displayHeatmap() {
            const selectedType = heatmapTypeSelect.value;
            const selectedJira = heatmapJiraSelect.value;
            if (!selectedJira || !selectedType || !allHeatmaps[selectedType] || !allHeatmaps[selectedType][selectedJira]) {
                heatmapDisplay.innerHTML = '<div class="no-data">Select Jira and heatmap type</div>';
                return;
            }
            const heatmapData = allHeatmaps[selectedType][selectedJira];
            const rows = Object.keys(heatmapData);
            const cols = Object.keys(heatmapData[rows[0]]);
            let maxValue = 0;
            rows.forEach(row => { cols.forEach(col => { maxValue = Math.max(maxValue, heatmapData[row][col]); }); });
            let html = '<table class="heatmap-table"><thead><tr><th>' + selectedType.replace('_', ' vs ') + '</th>';
            cols.forEach(col => { html += '<th>' + col + '</th>'; });
            html += '</tr></thead><tbody>';
            rows.forEach(row => {
                html += '<tr><th>' + row + '</th>';
                cols.forEach(col => {
                    const value = heatmapData[row][col];
                    const color = getColorForValue(value, maxValue);
                    const textColor = value > maxValue * 0.5 ? '#ffffff' : '#e8e8e8';
                    html += `<td class="heatmap-cell" style="background-color: ${color}; color: ${textColor};" title="${row} - ${col}: ${value}">${value}</td>`;
                });
                html += '</tr>';
            });
            html += '</tbody></table>';
            html += `<p style="margin-top: 10px; color: #b0c4de; text-align: center; font-size: 0.95em;"><strong>${selectedJira}: ${selectedType.replace('_', ' vs ')}</strong> | Max: ${maxValue}</p>`;
            heatmapDisplay.innerHTML = html;
        }
        heatmapJiraSelect.addEventListener('change', updateHeatmapTypeOptions);
        heatmapTypeSelect.addEventListener('change', displayHeatmap);
        updateHeatmapTypeOptions();

        // Updated Jira Summary Table with FPY % and APY %
        const summaryTable = document.getElementById('summaryTable');
        let summaryHTML = '<thead><tr><th>Jira</th><th title="boards affected by this Jira in first pass results">FPY Impacted Units</th><th title="units successfully recovered">Recovered Units</th><th title="units with the failure symptom, including legacy boards not yet cleared">APY Impacted Units</th><th title="percentage yield loss due to this issue on FPY">FPY Yield Impact (%)</th><th title="percentage yield loss due to this issue on APY">APY Yield Impact (%)</th></tr></thead><tbody>';
        jiraSummaryData.forEach(item => {
            const summary = jiraMapping[item.jira] || '';
            const tooltipText = summary ? `${item.jira}: ${summary}` : item.jira;
            const escapedTooltip = tooltipText.replace(/"/g, '&quot;').replace(/'/g, '&#39;');
            const jiraUrl = jiraUrls[item.jira];
            const jiraDisplay = jiraUrl 
                ? `<a href="${jiraUrl}" target="_blank" title="${escapedTooltip}" style="color: #4fc3f7; text-decoration: none; font-weight: bold;">${item.jira}</a>`
                : `<strong title="${escapedTooltip}" style="cursor: help;">${item.jira}</strong>`;
            summaryHTML += `<tr><td>${jiraDisplay}</td><td>${item.fpyUnits}</td><td>${item.recovered}</td><td>${item.apyUnits}</td><td>${item.fpyRate}%</td><td>${item.apyRate}%</td></tr>`;
        });
        summaryHTML += '</tbody>';
        summaryTable.innerHTML = summaryHTML;
    
        // Toggle function for switching between APY and FPY views
        function switchTrendView(view) {
            const apySection = document.getElementById('apySection');
            const fpySection = document.getElementById('fpySection');
            const btnAPY = document.getElementById('btnAPY');
            const btnFPY = document.getElementById('btnFPY');

            if (view === 'APY') {
                // Show APY, hide FPY
                apySection.style.display = 'block';
                fpySection.style.display = 'none';

                // Style active APY button
                btnAPY.style.background = 'linear-gradient(135deg, #4fc3f7 0%, #039be5 100%)';
                btnAPY.style.color = 'white';
                btnAPY.style.border = 'none';
                btnAPY.style.boxShadow = '0 2px 8px rgba(79, 195, 247, 0.3)';

                // Style inactive FPY button
                btnFPY.style.background = 'rgba(79, 195, 247, 0.15)';
                btnFPY.style.color = '#4fc3f7';
                btnFPY.style.border = '2px solid rgba(79, 195, 247, 0.5)';
                btnFPY.style.boxShadow = 'none';
            } else {
                // Show FPY, hide APY
                apySection.style.display = 'none';
                fpySection.style.display = 'block';

                // Style active FPY button
                btnFPY.style.background = 'linear-gradient(135deg, #4fc3f7 0%, #039be5 100%)';
                btnFPY.style.color = 'white';
                btnFPY.style.border = 'none';
                btnFPY.style.boxShadow = '0 2px 8px rgba(79, 195, 247, 0.3)';

                // Style inactive APY button
                btnAPY.style.background = 'rgba(79, 195, 247, 0.15)';
                btnAPY.style.color = '#4fc3f7';
                btnAPY.style.border = '2px solid rgba(79, 195, 247, 0.5)';
                btnAPY.style.boxShadow = 'none';
            }
        }

    
function showHeatmapGuide(){document.getElementById("heatmapGuideModal").style.display="block";}function closeHeatmapGuide(){document.getElementById("heatmapGuideModal").style.display="none";}window.onclick=function(e){if(e.target==document.getElementById("heatmapGuideModal"))closeHeatmapGuide();};document.addEventListener("keydown",function(e){if(e.key==="Escape")closeHeatmapGuide();});
        document.addEventListener('DOMContentLoaded', function() {
            const toggleBtn = document.getElementById('togglePercentUnits');
            if (toggleBtn) {
                toggleBtn.addEventListener('click', function() {
                    window.jiraTrendDisplayMode = window.jiraTrendDisplayMode === 'percent' ? 'units' : 'percent';

                    if (window.jiraTrendDisplayMode === 'percent') {
                        toggleBtn.textContent = '%';
                        toggleBtn.style.backgroundColor = '#4fc3f7';
                        toggleBtn.style.color = '#1a1f36';
                    } else {
                        toggleBtn.textContent = 'Units';
                        toggleBtn.style.backgroundColor = '#66bb6a';
                        toggleBtn.style.color = '#ffffff';
                    }

                    updateJiraTrendChartAPY();
                    updateJiraTrendChartFPY();
            updateYieldChart();
                });
            }



            // Toggle for FPY Units (separate toggle from APY)
            const toggleFPYBtn = document.getElementById('togglePercentUnitsFPY');
            if (toggleFPYBtn) {
                toggleFPYBtn.addEventListener('click', function() {
                    window.fpyTrendDisplayMode = window.fpyTrendDisplayMode === 'percent' ? 'units' : 'percent';

                    if (window.fpyTrendDisplayMode === 'percent') {
                        toggleFPYBtn.textContent = '%';
                        toggleFPYBtn.style.backgroundColor = '#4fc3f7';
                        toggleFPYBtn.style.color = '#1a1f36';
                    } else {
                        toggleFPYBtn.textContent = 'Units';
                        toggleFPYBtn.style.backgroundColor = '#66bb6a';
                        toggleFPYBtn.style.color = '#ffffff';
                    }

                    updateJiraTrendChartFPY();
                });
            }
        });
        </script>
<div id="heatmapGuideModal" class="modal">
    <div class="modal-content" style="max-width:700px;">
        <span class="close-button" onclick="closeHeatmapGuide()">&times;</span>
        <h2 style="color:#4fc3f7;margin-top:0;border-bottom:2px solid rgba(79,195,247,0.3);padding-bottom:10px;">ðŸ“Š Component Failure Heatmaps Guide</h2>

        <div style="background:rgba(79,195,247,0.1);padding:15px;border-radius:8px;margin:20px 0;">
            <h3 style="color:#4fc3f7;margin-top:0;font-size:16px;">ðŸŽ¯ Quick Start</h3>
            <ol style="line-height:2;margin:10px 0;padding-left:25px;">
                <li><strong>Select a Jira issue</strong> from the dropdown menu</li>
                <li><strong>Choose a heatmap type</strong> to visualize failure patterns</li>
                <li><strong>Analyze the matrix</strong> â€” brighter/redder cells = more failures</li>
            </ol>
        </div>

        <h3 style="color:#4fc3f7;margin-top:25px;font-size:16px;">ðŸ“‹ Available Heatmap Types</h3>
        <table style="width:100%;border-collapse:collapse;margin-top:10px;">
            <tr style="background:rgba(79,195,247,0.15);">
                <th style="padding:10px;text-align:left;color:#4fc3f7;border-bottom:1px solid rgba(79,195,247,0.3);">Type</th>
                <th style="padding:10px;text-align:left;color:#4fc3f7;border-bottom:1px solid rgba(79,195,247,0.3);">What It Shows</th>
            </tr>
            <tr>
                <td style="padding:10px;border-bottom:1px solid rgba(79,195,247,0.2);"><strong>UBB vs ASIC</strong></td>
                <td style="padding:10px;border-bottom:1px solid rgba(79,195,247,0.2);">Failures by UBB board (1-4) Ã— ASIC chip (A1-A8)</td>
            </tr>
            <tr>
                <td style="padding:10px;border-bottom:1px solid rgba(79,195,247,0.2);"><strong>UBB vs ETH</strong></td>
                <td style="padding:10px;border-bottom:1px solid rgba(79,195,247,0.2);">Failures by UBB board Ã— Ethernet port (0-15)</td>
            </tr>
            <tr>
                <td style="padding:10px;border-bottom:1px solid rgba(79,195,247,0.2);"><strong>UBB vs Ctrl</strong></td>
                <td style="padding:10px;border-bottom:1px solid rgba(79,195,247,0.2);">Failures by UBB board Ã— DDR Controller (A-H)</td>
            </tr>
            <tr>
                <td style="padding:10px;border-bottom:1px solid rgba(79,195,247,0.2);"><strong>ASIC vs ETH</strong></td>
                <td style="padding:10px;border-bottom:1px solid rgba(79,195,247,0.2);">Failures by ASIC chip Ã— Ethernet port</td>
            </tr>
            <tr>
                <td style="padding:10px;"><strong>ASIC vs Ctrl</strong></td>
                <td style="padding:10px;">Failures by ASIC chip Ã— DDR Controller</td>
            </tr>
        </table>

        <h3 style="color:#4fc3f7;margin-top:25px;font-size:16px;">ðŸ’¡ Reading the Heatmap</h3>
        <div style="margin-top:10px;line-height:1.9;">
            <div style="display:flex;align-items:center;margin-bottom:8px;">
                <div style="width:20px;height:20px;background:#d32f2f;border-radius:3px;margin-right:12px;"></div>
                <span><strong>Dark Red/Bright</strong> = High failure count (hotspot âš ï¸)</span>
            </div>
            <div style="display:flex;align-items:center;margin-bottom:8px;">
                <div style="width:20px;height:20px;background:#1e3a5f;border-radius:3px;margin-right:12px;"></div>
                <span><strong>Dark Blue/Gray</strong> = Zero or very low failures (âœ“)</span>
            </div>
            <div style="display:flex;align-items:center;">
                <div style="width:20px;height:20px;background:linear-gradient(to right,#1e3a5f,#d32f2f);border-radius:3px;margin-right:12px;"></div>
                <span><strong>Gradient</strong> = Moderate failures (monitor)</span>
            </div>
        </div>

        <div style="background:rgba(255,193,7,0.15);padding:12px;border-radius:8px;margin-top:20px;border-left:4px solid #ffc107;">
            <strong style="color:#ffc107;">ðŸ’­ Pro Tip:</strong> Look for patterns! If all failures cluster on one UBB or ASIC position, it suggests a systematic hardware issue rather than random failures.
        </div>
    </div>
</div></body>
</html>